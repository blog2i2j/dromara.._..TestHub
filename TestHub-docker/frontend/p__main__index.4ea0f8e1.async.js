"use strict";(self.webpackChunkTestHub=self.webpackChunkTestHub||[]).push([[185],{34286:function(Oe,le,f){f.d(le,{_F:function(){return $},lV:function(){return x}});var fe={SQL:"SQL\u8BED\u53E5",SQL_CALL:"\u5B58\u50A8\u8FC7\u7A0B",HTTP:"HTTP\u8BF7\u6C42",CONST:"\u56FA\u5B9A\u5E38\u91CF",CONVERT:"\u6570\u636E\u8F6C\u6362"},$=[{value:"SLEEP",label:"\u4F11\u7720"},{value:"SQL",label:"SQL\u8BED\u53E5"},{value:"SQL_CALL",label:"\u5B58\u50A8\u8FC7\u7A0B"},{value:"SQL_BEGIN",label:"\u5F00\u542F\u4E8B\u52A1"},{value:"SQL_COMMIT",label:"\u63D0\u4EA4\u4E8B\u52A1"},{value:"HTTP",label:"HTTP\u8BF7\u6C42"},{value:"CONST",label:"\u56FA\u5B9A\u5E38\u91CF"},{value:"CONVERT",label:"\u6570\u636E\u8F6C\u6362"},{value:"CHECK_OBJ",label:"\u5BF9\u6BD4\u5BF9\u8C61"},{value:"CHECK",label:"\u6821\u9A8C"}],Q=[{value:"SLEEP",label:"\u4F11\u7720"},{value:"SQL",label:"SQL\u8BED\u53E5"},{value:"SQL_CALL",label:"\u5B58\u50A8\u8FC7\u7A0B"},{value:"SQL_BEGIN",label:"\u5F00\u542F\u4E8B\u52A1"},{value:"SQL_COMMIT",label:"\u63D0\u4EA4\u4E8B\u52A1"},{value:"HTTP",label:"HTTP\u8BF7\u6C42"},{value:"CONST",label:"\u56FA\u5B9A\u5E38\u91CF"},{value:"CONVERT",label:"\u6570\u636E\u8F6C\u6362"}],x={SLEEP:"\u4F11\u7720",SQL:"SQL\u8BED\u53E5",SQL_CALL:"\u5B58\u50A8\u8FC7\u7A0B",SQL_BEGIN:"\u5F00\u542F\u4E8B\u52A1",SQL_COMMIT:"\u63D0\u4EA4\u4E8B\u52A1",HTTP:"HTTP\u8BF7\u6C42",CONST:"\u56FA\u5B9A\u5E38\u91CF",CONVERT:"\u6570\u636E\u8F6C\u6362",CHECK:"\u6821\u9A8C",CHECK_OBJ:"\u5BF9\u6BD4\u5BF9\u8C61"}},50962:function(Oe,le,f){var fe=f(67294),$=f(66309),Q=f(34286),x=f(85893);function d(we){var J=we.actionType,Y=we.className;return J.toUpperCase()=="SLEEP"?(0,x.jsx)($.Z,{color:"magenta",className:Y,children:Q.lV.SLEEP}):J.toUpperCase()=="SQL"?(0,x.jsx)($.Z,{color:"red",className:Y,children:Q.lV.SQL}):J.toUpperCase()=="SQL_CALL"?(0,x.jsx)($.Z,{color:"volcano",className:Y,children:Q.lV.SQL_CALL}):J.toUpperCase()=="SQL_BEGIN"?(0,x.jsx)($.Z,{color:"orange",className:Y,children:Q.lV.SQL_BEGIN}):J.toUpperCase()=="SQL_COMMIT"?(0,x.jsx)($.Z,{color:"gold",className:Y,children:Q.lV.SQL_COMMIT}):J.toUpperCase()=="CHECK_OBJ"?(0,x.jsx)($.Z,{color:"lime",className:Y,children:Q.lV.CHECK_OBJ}):J.toUpperCase()=="CHECK"?(0,x.jsx)($.Z,{color:"green",className:Y,children:Q.lV.CHECK}):J.toUpperCase()=="HTTP"?(0,x.jsx)($.Z,{color:"cyan",className:Y,children:Q.lV.HTTP}):J.toUpperCase()=="CONST"?(0,x.jsx)($.Z,{color:"blue",className:Y,children:Q.lV.CONST}):(0,x.jsx)(x.Fragment,{children:J.toUpperCase()})}le.Z=d},60321:function(Oe,le,f){f.r(le),f.d(le,{default:function(){return Fn}});var fe=f(19632),$=f.n(fe),Q=f(5574),x=f.n(Q),d=f(67294),we=f(96974),J=f(83159),Y=f(83062),ge=f(34232),ga=f(67434),N=f(59680),Ca=f(58839),ja=f(58719),ya=f(52464),Xe=f(782),xa=f(76248),ba={mainPageActiveTab:"tools"},Ye=(0,ya.F)((0,Xe.mW)((0,Xe.tJ)(function(){return ba},{name:"main-store",getStorage:function(){return localStorage},partialize:function(n){return{mainPageActiveTab:n.mainPageActiveTab}}})),xa.X),Sa=function(n){return Ye.setState({mainPageActiveTab:n})},Pa=f(46659),z={page:"page___YueCb",layoutLeft:"layoutLeft___vqtsw",dargBox:"dargBox____iumN",brandLogo:"brandLogo___uAMRL",projectLogo:"projectLogo___ivvPF",navList:"navList___zgd3g",icon:"icon___rNUKr",nav:"nav___kRDzT",name:"name___Ey9E9",activeNav:"activeNav___pIEK_",footer:"footer___GgRwE",userBox:"userBox___UpcoO",questionIcon:"questionIcon___ValoS",userDropdown:"userDropdown___Mt8ks",layoutRight:"layoutRight___fIrFq",main:"main___IkUdn",componentBox:"componentBox___XjmnM"},Ta=f(6236),Za=f(39825),_e=f(97893),ka=f(54377);function wa(){var a=(0,Za.F)(),n=x()(a,1),t=n[0];(0,d.useEffect)(function(){var o=window._AppThemePack,r=o.colorPrimary,u=o.colorBgBase,s=o.colorTextBase,c={"editor.lineHighlightBackground":r+"14","editor.selectionBackground":r+"50","editorLineNumber.activeForeground":r,"editorCursor.foreground":r,"editorRuler.foreground":r+"15","editor.foreground":s,"editor.background":u};_e.editor.defineTheme(t.backgroundColor,{base:t.backgroundColor.includes(ka.f8.Dark)?"vs-dark":"vs",inherit:!0,rules:[],colors:c}),_e.editor.setTheme(t.backgroundColor)},[t.backgroundColor])}var Ea=wa,Ia=f(9783),Ce=f.n(Ia),_={projectList:"projectList___MyMtJ",cardList:"cardList___inh9r",cardAvatar:"cardAvatar___ncbK2",card:"card___Uw6iZ",cardCurrent:"cardCurrent___sTOPn",newButton:"newButton___fqvwo",projectChangeTip:"projectChangeTip___GX79b"},Na=f(93967),X=f.n(Na),We=f(75891),Ee=f(17788),ie=f(71230),V=f(15746),qe=f(66309),je=f(2487),te=f(40411),he=f(85813),Da=f(64583),W=f(46773),e=f(85893),ea=We.Z.Paragraph,Bn=We.Z.Text;function Ra(a){var n=(0,d.useState)(!1),t=x()(n,2),o=t[0],r=t[1],u=(0,d.useState)(!0),s=x()(u,2),c=s[0],l=s[1],i=(0,W.vo)(),v=(0,d.useState)(i),m=x()(v,2),P=m[0],p=m[1],b=(0,d.useState)([]),R=x()(b,2),S=R[0],Z=R[1];function A(){if(i!=null&&P!=null)return i.code!=P.code;if(i==null&&P!=null)return!0}return(0,d.useEffect)(function(){if(!o){var I=Da.Z.getProjectSimpleList();I.then(function(h){Z(h),l(!1),r(!0)}),I.catch(function(h){l(!1),r(!0)})}},[]),(0,e.jsx)(Ee.Z,{open:a.isOpen,title:"\u5207\u6362\u9879\u76EE",destroyOnClose:!0,onOk:function(){return A()?((0,W.Ce)(P),a.callback(!0)):a.callback(!1),!0},onCancel:function(){a.callback(!1)},width:800,maskClosable:!1,footer:function(h,g){var D=g.OkBtn,w=g.CancelBtn;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(ie.Z,{children:[(0,e.jsx)(V.Z,{span:16,children:(0,e.jsx)("div",{className:_.projectChangeTip,children:A()&&(0,e.jsxs)(e.Fragment,{children:["\u786E\u8BA4\u540E\u4F60\u5C06\u5207\u6362\u81F3",(0,e.jsx)(qe.Z,{bordered:!1,color:"processing",children:P==null?void 0:P.name}),"\u9879\u76EE\uFF0C\u8BF7\u6CE8\u610F\u4FDD\u5B58\u5C1A\u672A\u4FDD\u5B58\u7684\u7A97\u53E3"]})})}),(0,e.jsxs)(V.Z,{span:8,children:[(0,e.jsx)(w,{}),(0,e.jsx)(D,{})]})]})})},children:(0,e.jsx)("div",{className:_.projectList,children:(0,e.jsx)("div",{className:_.cardList,children:(0,e.jsx)(je.Z,{rowKey:"code",loading:c,grid:{gutter:16,xs:1,sm:2,md:2,lg:3,xl:3,xxl:3},dataSource:$()(S),renderItem:function(h){var g,D;return(0,e.jsxs)(je.Z.Item,{children:[i!=null&&i.code==h.code&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(te.Z.Ribbon,{text:"\u5F53\u524D",children:(0,e.jsx)(he.Z,{className:X()(_.card,Ce()({},_.cardCurrent,P!=null&&P.code==h.code)),onClick:function(){p(h)},children:(0,e.jsx)(he.Z.Meta,{avatar:(0,e.jsx)("div",{className:_.cardAvatar,children:(g=h.name)===null||g===void 0?void 0:g.charAt(0)}),title:h.name,description:(0,e.jsx)(ea,{className:_.item,ellipsis:{rows:1,tooltip:h.description},children:h.name})})})})}),i==null||i.code!=h.code&&(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(he.Z,{className:X()(_.card,Ce()({},_.cardCurrent,P!=null&&P.code==h.code)),onClick:function(){p(h)},children:(0,e.jsx)(he.Z.Meta,{avatar:(0,e.jsx)("div",{className:_.cardAvatar,children:(D=h.name)===null||D===void 0?void 0:D.charAt(0)}),title:h.name,description:(0,e.jsx)(ea,{className:_.item,ellipsis:{rows:1,tooltip:h.description},children:h.name})})})})]},h.code)}})})})})}var La=Ra,Fa={},ye=f(92841),Aa=f(79179),Oa=f(57953),Ba=f(15009),k=f.n(Ba),Ma=f(99289),M=f.n(Ma),Be=f(37476),oe=f(5966);function Ua(a){var n=a.httpPage,t=a.dispatch,o=a.parentKey,r=(0,W.vo)();return(0,e.jsx)(Be.Y,{layout:"horizontal",width:560,title:(0,N.ZP)("common.text.newDir"),open:o!=null,onFinish:function(){var u=M()(k()().mark(function s(c){return k()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(o!=null){i.next=2;break}return i.abrupt("return",!1);case 2:return t({type:"httpPage/saveTree",payload:{parentId:parseInt(o),projectCode:r==null?void 0:r.code,name:c.name},callback:function(m){t({type:"httpPage/putTree",payload:{oldParentId:void 0,parentId:parseInt(o),node:m}}),a.callback()}}),i.abrupt("return",!0);case 4:case"end":return i.stop()}},s)}));return function(s){return u.apply(this,arguments)}}(),modalProps:{destroyOnClose:!0,okText:(0,N.ZP)("common.button.confirm"),cancelText:(0,N.ZP)("common.button.cancel"),onCancel:function(){a.callback()}},children:(0,e.jsx)(oe.Z,{name:"name",label:(0,N.ZP)("common.label.name"),labelCol:{span:4},wrapperCol:{span:20},rules:[{required:!0,message:(0,N.ZP)("common.label.name")+(0,N.ZP)("common.text.notNull")}]})})}var Ka=Ua;function Ha(a){var n=a.dispatch,t=a.thisNode;return(0,e.jsx)(Be.Y,{layout:"horizontal",width:560,title:(0,N.ZP)("common.text.rename")+" - "+(t!=null?t==null?void 0:t.data.name:""),open:t!=null,initialValues:{name:t==null?void 0:t.data.name},onFinish:function(){var o=M()(k()().mark(function r(u){return k()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(t!=null){c.next=2;break}return c.abrupt("return",!1);case 2:if(t.data.name!=u.name){c.next=5;break}return a.callback(),c.abrupt("return",!1);case 5:return n({type:"httpPage/rename",payload:{name:u.name,id:parseInt(t==null?void 0:t.data.key)},callback:function(i){n({type:"httpPage/putTree",payload:{oldParentId:parseInt(t.data.parentKey),parentId:parseInt(t.data.parentKey),node:i}}),a.callback()}}),c.abrupt("return",!0);case 7:case"end":return c.stop()}},r)}));return function(r){return o.apply(this,arguments)}}(),modalProps:{destroyOnClose:!0,okText:(0,N.ZP)("common.button.confirm"),cancelText:(0,N.ZP)("common.button.cancel"),onCancel:function(){a.callback()}},children:(0,e.jsx)(oe.Z,{name:"name",label:(0,N.ZP)("common.label.name"),labelCol:{span:4},wrapperCol:{span:20},rules:[{required:!0,message:(0,N.ZP)("common.label.name")+(0,N.ZP)("common.text.notNull")}]})})}var Va=Ha;function $a(a){var n=a.httpPage,t=a.dispatch,o=a.parentKey;return(0,e.jsx)(Be.Y,{layout:"horizontal",width:560,title:"\u65B0\u589E\u63A5\u53E3",open:o!=null,onFinish:function(){var r=M()(k()().mark(function u(s){var c;return k()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(a.parentKey!=null){i.next=2;break}return i.abrupt("return",!1);case 2:return t({type:"httpPage/newApiConsole",payload:{name:s.name,projectCode:(c=(0,W.vo)())===null||c===void 0?void 0:c.code,parentId:parseInt(o!=null?o:"0")},callback:a.callback}),i.abrupt("return",!0);case 4:case"end":return i.stop()}},u)}));return function(u){return r.apply(this,arguments)}}(),modalProps:{destroyOnClose:!0,okText:(0,N.ZP)("common.button.confirm"),cancelText:(0,N.ZP)("common.button.cancel"),onCancel:function(){a.callback()}},children:(0,e.jsx)(oe.Z,{name:"name",label:"\u540D\u79F0",labelCol:{span:4},wrapperCol:{span:20},rules:[{required:!0,message:(0,N.ZP)("common.label.name")+(0,N.ZP)("common.text.notNull")}]})})}var za=$a;function Ga(a){var n=a.dispatch,t=a.httpPage,o=a.recognizeIcon,r=(0,d.useState)(),u=x()(r,2),s=u[0],c=u[1],l=(0,d.useState)(),i=x()(l,2),v=i[0],m=i[1],P=(0,d.useState)(),p=x()(P,2),b=p[0],R=p[1],S=(0,d.useState)(),Z=x()(S,2),A=Z[0],I=Z[1];return(0,e.jsxs)(e.Fragment,{children:[!t.isLoaded&&(0,e.jsx)("div",{style:{width:"100%",height:"100%"},children:(0,e.jsx)(Oa.Z,{})}),t.isLoaded&&(0,e.jsx)(Aa.Z,{datas:t==null?void 0:t.trees,onDrop:function(g,D){console.log(g),console.log(D)},onDoubleClick:function(g){var D=g;n({type:"httpPage/loadApi",payload:g.index,callback:function(j){D.data.info=j,n({type:"httpPage/addConsole",payload:{node:g.data}})}})},onRefresh:function(){var g;n({type:"httpPage/loadTrees",payload:{projectCode:(g=(0,W.vo)())===null||g===void 0?void 0:g.code}})},addMenu:function(){var g=[];return g.push({label:(0,e.jsx)(ye.Z,{icon:"\uEAC5",label:"\u65B0\u589E\u6587\u4EF6\u5939"}),key:"ueac5",onClick:function(){c("0")}}),g.push({label:(0,e.jsx)(ye.Z,{icon:"\uE713",label:"\u65B0\u589E\u63A5\u53E3"}),key:"ue713",onClick:function(){R("0")}}),g},recognizeIcon:function(g){return o(g.data.nodeType)},renderMenu:function(g){var D=[];return g.data.nodeType==ua.DIR&&(D.push({label:(0,e.jsx)(ye.Z,{icon:"\uEAC5",label:"\u65B0\u589E\u6587\u4EF6\u5939"}),key:"ueac5",onClick:function(){c(g.index+"")}}),D.push({label:(0,e.jsx)(ye.Z,{icon:"\uE713",label:"\u65B0\u589E\u63A5\u53E3"}),key:"ue713",onClick:function(){R(g.index)}})),D.push({label:(0,e.jsx)(ye.Z,{icon:"\uE626",label:"\u91CD\u547D\u540D"}),key:"ue626",onClick:function(){I(g)}}),D}}),(0,e.jsx)(Ka,{parentKey:s,httpPage:t,dispatch:a.dispatch,callback:function(){c(void 0)}}),(0,e.jsx)(za,{parentKey:b,httpPage:t,dispatch:a.dispatch,callback:function(){R(void 0)}}),(0,e.jsx)(Va,{thisNode:A,httpPage:t,dispatch:a.dispatch,callback:function(){I(void 0)}})]})}var Qa=Ga,be={httpPageRight:"httpPageRight___B3tIG",httpPageTabs:"httpPageTabs___T0v_3",httpPageContent:"httpPageContent___hjUHt",windowContent:"windowContent___JFr0B",concealTab:"concealTab___mjEE_"},aa=f(21862),Ja=f(98951),Xa=f(97857),B=f.n(Xa),Se=f(34041),Me=f(23323),ta=f(69677),Pe=f(14726),q={httpConsoleBox:"httpConsoleBox___arsoD",httpTar:"httpTar___UmXo4",httpConsoleContainer:"httpConsoleContainer___JkLx2",httpConsole:"httpConsole___fA84E",httpConsoleResult:"httpConsoleResult___To60J",boldText:"boldText___X3D1C",hidden:"hidden___MrnUP"},na=f(92398),Ue={requestViewContainer:"requestViewContainer___TuqAB",requestViewContainerTabs:"requestViewContainerTabs___LkSO9","ant-tabs":"ant-tabs___LQBkU","ant-tabs-nav":"ant-tabs-nav___zByUM","ant-tabs-content-holder":"ant-tabs-content-holder___FUzvc","ant-tabs-content":"ant-tabs-content___B9ikz","ant-tabs-tabpane-active":"ant-tabs-tabpane-active___t0EtF",body:"body___xluJz",bodyRow:"bodyRow___trM2a","ant-pro-card":"ant-pro-card___S9Py1"},ra=f(88245),Te=f(78045),Ya=f(78957),Ie=f(8751),_a=f(13728),Wa=f(50727),Ne=f(2453),qa=f(72269),Ke=f(40075),De=f(40238),sa={effective:"effective___Otx29"},ue=f(89051),et=[{label:"XML",value:"xml"}],at=function(a){return a.EDIT="edit",a}({}),tt=(0,d.forwardRef)(function(a,n){var t=(0,d.useRef)(),o=(0,d.useState)(a.params),r=x()(o,2),u=r[0],s=r[1],c=(0,d.useState)([]),l=x()(c,2),i=l[0],v=l[1],m=(0,d.useState)(),P=x()(m,2),p=P[0],b=P[1],R=(0,d.useState)("xml"),S=x()(R,2),Z=S[0],A=S[1];(0,d.useEffect)(function(){a.onChange!=null&&a.onChange(u)},[u]),(0,d.useImperativeHandle)(n,function(){return{getData:function(){var L=M()(k()().mark(function y(){var T,F;return k()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(!(i.length>0)){K.next=3;break}return Ne.ZP.error("\u6709\u53C2\u6570\u6B63\u5728\u7F16\u8F91\u4E2D\u65E0\u6CD5\u64CD\u4F5C"),K.abrupt("return",{flag:!1});case 3:return K.next=5,(T=t.current)===null||T===void 0||(F=T.validateFieldsReturnFormatValue)===null||F===void 0?void 0:F.call(T);case 5:return K.abrupt("return",{flag:!0,data:u});case 6:case"end":return K.stop()}},y)}));function E(){return L.apply(this,arguments)}return E}()}});var I=(0,De.Z)(function(L,E){E(L)},{wait:500}),h=I.run;function g(L,E){var y=u.map(function(T){return T.id===L.id?B()(B()({},T),{},{necessary:E}):T});s(y)}function D(L){var E=u.map(function(y){return y.id===L.id?B()(B()({},y),{},{effective:L.effective==!1}):y});s(E)}function w(L){var E=u.map(function(y){return B()(B()({},y),{},{effective:L})});s(E)}var j=function(){var L=M()(k()().mark(function E(y){var T;return k()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!(i.length>0)){C.next=3;break}return Ne.ZP.error("\u6709\u53C2\u6570\u6B63\u5728\u7F16\u8F91\u4E2D\u65E0\u6CD5\u64CD\u4F5C"),C.abrupt("return");case 3:if(T=null,y!=at.EDIT){C.next=13;break}if(!(u.length>0)){C.next=11;break}return C.next=8,Ke.Z.paramsJson2Xml({info:JSON.stringify(u)});case 8:T=C.sent,C.next=12;break;case 11:T=`<params>
	<param code="" name="" dataType="STRING" data=""/>
</params>`;case 12:b(T);case 13:case"end":return C.stop()}},E)}));return function(y){return L.apply(this,arguments)}}(),O=[{label:(0,e.jsx)(ye.Z,{icon:"\uEAC5",label:"\u6279\u91CF\u7F16\u8F91"}),key:"ueac5",onClick:function(){var L=M()(k()().mark(function y(){var T;return k()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!(i.length>0)){C.next=3;break}return Ne.ZP.error("\u6709\u53C2\u6570\u6B63\u5728\u7F16\u8F91\u4E2D\u65E0\u6CD5\u64CD\u4F5C"),C.abrupt("return");case 3:if(T=`<params>
	<param code="" name="" dataType="STRING" data=""/>
</params>`,!(u.length>0)){C.next=8;break}return C.next=7,Ke.Z.paramsJson2Xml({info:JSON.stringify(u)});case 7:T=C.sent;case 8:b(T);case 9:case"end":return C.stop()}},y)}));function E(){return L.apply(this,arguments)}return E}()}],G=function(){if(Array.isArray(u)&&u.length>0){var E=u.every(function(y){return y.effective!=!1});return E?(0,e.jsx)("span",{style:{fontSize:14},children:(0,e.jsx)(Ie.Z,{className:sa.effective,onClick:function(){return w(!1)}})}):(0,e.jsx)("span",{style:{fontSize:14},children:(0,e.jsx)(Ie.Z,{onClick:function(){return w(!0)}})})}else return"\u542F\u7528"},se=[{title:G(),dataIndex:"effective",width:"3%",hideInTable:a.effective!=!0,editable:!1,render:function(E,y,T,F){return y.effective!=!1?(0,e.jsx)("span",{style:{fontSize:14},children:(0,e.jsx)(Ie.Z,{className:sa.effective,onClick:function(){return D(y)}})}):(0,e.jsx)("span",{style:{fontSize:14},children:(0,e.jsx)(Ie.Z,{onClick:function(){return D(y)}})})}},{title:"\u53C2\u6570\u540D\u79F0",dataIndex:"code",tooltip:"\u7F16\u7801\u9700\u8981\u5728\u7EC4\u5185\u552F\u4E00,\u5FC5\u987B\u4EE5\u5B57\u6BCD\u5F00\u5934",formItemProps:function(E,y){var T=y.rowIndex;return{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"},{pattern:/^[a-zA-Z][a-zA-Z0-9_-]{0,20}$/,message:"\u5FC5\u987B\u4EE5\u5B57\u6BCD\u5F00\u5934"},{validator:function(){var F=M()(k()().mark(function K(ma,ne,Qe){var ce,de;return k()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:for(ce=[],de=0;de<u.length;de++)T!=de&&ce.push(u[de].code);if(ce.push(ne),Array.from(new Set(ce)).length==ce.length){ae.next=5;break}return ae.abrupt("return",Promise.reject(new Error("\u7F16\u7801\u5DF2\u7ECF\u5B58\u5728")));case 5:Promise.resolve();case 6:case"end":return ae.stop()}},K)}));function C(K,ma,ne){return F.apply(this,arguments)}return C}()}]}},width:"15%"},{title:"\u63CF\u8FF0",dataIndex:"name",width:"20%"},{title:"\u6570\u636E\u7C7B\u578B",dataIndex:"dataType",width:"17%",valueType:"select",valueEnum:{STRING:{text:"\u5B57\u7B26\u4E32",status:"STRING"},NUNBER:{text:"\u6570\u5B57",status:"NUNBER"},BOLL:{text:"\u5E03\u5C14\u503C",status:"BOLL"},MAP:{text:"\u952E\u503C\u5BF9",status:"MAP"},TIME_YMD:{text:"\u5E74\u6708\u65E5",status:"TIME_YMD"},TIME_HMS:{text:"\u65F6\u5206\u79D2",status:"TIME_HMS"},TIME_YMDHMS:{text:"\u5E74\u6708\u65E5\u65F6\u5206\u79D2",status:"TIME_YMDHMS"}},formItemProps:function(E,y){var T=y.rowIndex;return{rules:[{required:!0,message:"\u6570\u636E\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A"}]}}},{title:"\u662F\u5426\u5FC5\u4F20",width:"10%",dataIndex:"necessary",valueType:"switch",render:function(E,y){return(0,e.jsx)(qa.Z,{checked:y.necessary,onChange:function(F){return g(y,F)}})}},{title:"\u9ED8\u8BA4\u503C",dataIndex:"data",width:"28%"},{title:(0,e.jsxs)(e.Fragment,{children:["\u64CD\u4F5C ",(0,e.jsx)(J.Z,{menu:{items:O},children:(0,e.jsx)(_a.Z,{style:{fontSize:14}})})]}),valueType:"option",width:"10%",render:function(E,y,T,F){return[(0,e.jsx)("a",{onClick:function(){var K;F==null||(K=F.startEditable)===null||K===void 0||K.call(F,y.id)},children:"\u7F16\u8F91"},"editable"),(0,e.jsx)("a",{onClick:function(){s(u.filter(function(K){return K.id!==y.id}))},children:"\u5220\u9664"},"delete")]}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:X()(a.className),children:(0,e.jsx)(Wa.Z,{editableFormRef:t,rowKey:"id",recordCreatorProps:{record:function(){return{id:Math.random()*1e16,code:"",dataType:"STRING"}}},columns:se,value:u,onChange:s,editable:{type:"multiple",editableKeys:i,actionRender:function(E,y,T){return[T.save,T.delete]},onValuesChange:function(E,y){s(y)},onChange:v}})}),(0,e.jsxs)(Ee.Z,{title:"\u6279\u91CF\u7F16\u8F91",width:750,open:p!=null,destroyOnClose:!0,onOk:M()(k()().mark(function L(){var E;return k()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(E=null,p==null){T.next=7;break}return T.next=4,Ke.Z.paramsXml2Json({info:p});case 4:E=T.sent,s(E),b(void 0);case 7:case"end":return T.stop()}},L)})),onCancel:function(){b(void 0)},maskClosable:!1,okText:(0,N.ZP)("case.button.ok"),cancelText:(0,N.ZP)("case.button.cancel"),children:[(0,e.jsx)("div",{style:{paddingTop:5,paddingBottom:15},children:(0,e.jsx)(Te.ZP.Group,{options:et,onChange:function(E){var y=E.target.value;A(y)},value:Z,optionType:"button"})}),(0,e.jsx)(ue.Z,{width:"100%",language:Z,height:400,onChange:function(E){h(E,b)},defaultValue:p})]})]})}),ee=tt,nt=(0,d.forwardRef)(function(a,n){var t=(0,d.useState)(a.data.language),o=x()(t,2),r=o[0],u=o[1],s=(0,d.useState)(a.data),c=x()(s,2),l=c[0],i=c[1],v=(0,d.useState)(!0),m=x()(v,2),P=m[0],p=m[1],b=(0,d.useRef)();(0,d.useEffect)(function(){l.type=="raw"?p(!1):(l.type=="binary"||l.type=="x-www-form-urlencoded",p(!0)),a.onChange!=null&&a.onChange(B()({},l))},[l]);var R=(0,De.Z)(function(A,I){I(A)},{wait:100}),S=R.run,Z=function(I){var h=B()({},l);h.type=I.target.value,I.target.value=="raw"?(p(!1),(h.subType==null||h.subType=="text")&&(h.subType="Json")):I.target.value=="binary"||I.target.value=="x-www-form-urlencoded"?(p(!0),h.subType=void 0):(h.subType==null&&(h.subType="Json"),p(!0)),i(h)};return(0,d.useImperativeHandle)(n,function(){return{getData:function(){var A=M()(k()().mark(function h(){var g,D;return k()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(g=l,g.type!="form-data"){j.next=11;break}if(b.current==null){j.next=9;break}return j.next=5,b.current.getData();case 5:if(D=j.sent,D.flag){j.next=8;break}return j.abrupt("return",{flag:!1,data:{}});case 8:g.datas=D.data;case 9:j.next=22;break;case 11:if(g.type!="raw"){j.next=22;break}if(g.content){j.next=14;break}return j.abrupt("return",{flag:!1,data:{}});case 14:if(g.language!="json"){j.next=22;break}j.prev=15,JSON.parse(g.content),j.next=22;break;case 19:return j.prev=19,j.t0=j.catch(15),j.abrupt("return",{flag:!1,data:{}});case 22:return j.abrupt("return",{flag:!0,data:g});case 23:case"end":return j.stop()}},h,null,[[15,19]])}));function I(){return A.apply(this,arguments)}return I}()}}),(0,e.jsxs)("div",{className:a.className,children:[(0,e.jsxs)(ie.Z,{style:{height:35},align:"middle",children:[(0,e.jsx)(V.Z,{span:18,children:(0,e.jsxs)(Te.ZP.Group,{onChange:Z,value:l.type==null?"none":l.type,children:[(0,e.jsx)(Te.ZP,{value:"none",children:"none"}),(0,e.jsx)(Te.ZP,{value:"form-data",children:"form-data"}),(0,e.jsx)(Te.ZP,{value:"raw",children:"raw"})]})}),(0,e.jsx)(V.Z,{span:6,style:{textAlign:"right"},children:(0,e.jsx)("div",{hidden:P,children:(0,e.jsx)(Ya.Z,{wrap:!0,children:(0,e.jsx)(Se.Z,{value:r,style:{width:70},options:[{value:"json",label:"JSON"},{value:"xml",label:"XML"}],onChange:function(I){var h=l;h.language=I,i(B()({},h)),u(I)}})})})})]}),(0,e.jsx)("div",{hidden:l.type!=null&&l.type!=null&&l.type!="none",children:(0,e.jsx)(ie.Z,{align:"middle",justify:"center",children:(0,e.jsx)(V.Z,{style:{height:237,lineHeight:15},children:"\u6CA1\u6709\u6B63\u6587"})})}),(0,e.jsx)("div",{hidden:l.type!="form-data",children:(0,e.jsx)(ra.Z,{split:"vertical",children:(0,e.jsx)(ee,{params:l.datas==null?[]:l.datas,ref:b,effective:a.effective,onChange:function(I){var h=l;h.datas=I,i(B()({},h))}})})}),(0,e.jsx)("div",{className:X()(Ce()({},a.bodyRawClassName,l.type=="x-www-form-urlencoded"||l.type=="raw"||l.type=="binary"||l.type=="GraphQL")),hidden:!(l.type=="x-www-form-urlencoded"||l.type=="raw"||l.type=="binary"||l.type=="GraphQL"),children:(0,e.jsx)(ra.Z,{split:"vertical",children:(0,e.jsx)(ue.Z,{language:r,defaultValue:l.content,onChange:function(I){if(l.content!=I){var h=l;h.content=I,h.type="raw",S("",function(){i(B()({},h))})}}})})})]})}),rt=nt,st=d.memo((0,d.forwardRef)(function(a,n){var t=(0,d.useRef)(),o=(0,d.useRef)(),r=(0,d.useRef)(),u=(0,d.useRef)(),s=(0,d.useRef)(),c=(0,d.useState)(a.activeKey?a.activeKey:"Rests"),l=x()(c,2),i=l[0],v=l[1],m=(0,d.useState)(null),P=x()(m,2),p=P[0],b=P[1],R=(0,d.useState)(a.data),S=x()(R,2),Z=S[0],A=S[1],I=function(j){v(j),b(null)},h=function(j){var O=Z;O.body=j,A(B()({},O)),a.onDataChange!=null&&a.onDataChange(B()({},O))},g=function(j){A(B()({},j)),a.onDataChange!=null&&a.onDataChange(B()({},j))};(0,d.useImperativeHandle)(n,function(){return{getData:function(){var w=M()(k()().mark(function O(){var G,se,L,E,y,T;return k()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(G=Z,s.current==null){C.next=9;break}return C.next=4,s.current.getData();case 4:if(se=C.sent,se.flag){C.next=8;break}return b("Rests"),C.abrupt("return",{flag:!1,data:{}});case 8:G.rests=se.data;case 9:if(t.current==null){C.next=17;break}return C.next=12,t.current.getData();case 12:if(L=C.sent,L.flag){C.next=16;break}return b("Headers"),C.abrupt("return",{flag:!1,data:{}});case 16:G.headers=L.data;case 17:if(o.current==null){C.next=25;break}return C.next=20,o.current.getData();case 20:if(E=C.sent,E.flag){C.next=24;break}return b("Cookices"),C.abrupt("return",{flag:!1,data:{}});case 24:G.cookices=E.data;case 25:if(r.current==null){C.next=33;break}return C.next=28,r.current.getData();case 28:if(y=C.sent,y.flag){C.next=32;break}return b("Params"),C.abrupt("return",{flag:!1,data:{}});case 32:G.params=y.data;case 33:if(u.current==null){C.next=41;break}return C.next=36,u.current.getData();case 36:if(T=C.sent,T.flag){C.next=40;break}return b("Body"),C.abrupt("return",{flag:!1,data:{}});case 40:G.body=T.data;case 41:return b(null),C.abrupt("return",{flag:!0,data:G});case 43:case"end":return C.stop()}},O)}));function j(){return w.apply(this,arguments)}return j}()}});var D=[{key:"Rests",label:p=="Rests"?(0,e.jsx)(te.Z,{dot:!0,color:"red",children:(0,N.ZP)("http.data.rests")}):(0,N.ZP)("http.data.rests"),forceRender:!0,children:(0,e.jsx)("div",{style:{paddingTop:10},children:(0,e.jsx)(ee,{params:Z.rests==null?[]:Z.rests,ref:s,effective:a.effective,onChange:function(j){var O=Z;O.rests=j,g(B()({},O))}})})},{key:"Headers",label:p=="Headers"?(0,e.jsx)(te.Z,{dot:!0,color:"red",children:(0,N.ZP)("http.data.headers")}):(0,N.ZP)("http.data.headers"),forceRender:!0,children:(0,e.jsx)("div",{style:{paddingTop:10},children:(0,e.jsx)(ee,{params:Z.headers==null?[]:Z.headers,ref:t,effective:a.effective,onChange:function(j){var O=Z;O.headers=j,g(B()({},O))}})})},{key:"Cookices",label:p=="Cookices"?(0,e.jsx)(te.Z,{dot:!0,color:"red",children:(0,N.ZP)("http.data.cookies")}):(0,N.ZP)("http.data.cookies"),forceRender:!0,children:(0,e.jsx)("div",{style:{paddingTop:10},children:(0,e.jsx)(ee,{params:Z.cookices==null?[]:Z.cookices,ref:o,effective:a.effective,onChange:function(j){var O=Z;O.cookices=j,g(B()({},O))}})})},{key:"Params",label:p=="Params"?(0,e.jsx)(te.Z,{dot:!0,color:"red",children:(0,N.ZP)("http.data.params")}):(0,N.ZP)("http.data.params"),forceRender:!0,children:(0,e.jsx)("div",{style:{paddingTop:10},children:(0,e.jsx)(ee,{params:Z.params==null?[]:Z.params,ref:r,effective:a.effective,onChange:function(j){var O=Z;O.params=j,g(B()({},O))}})})},{key:"Body",label:p=="Body"?(0,e.jsx)(te.Z,{dot:!0,color:"red",children:(0,N.ZP)("http.data.body")}):(0,N.ZP)("http.data.body"),forceRender:!0,children:(0,e.jsx)("div",{style:{paddingTop:10,width:"100%",height:"100%"},children:(0,e.jsx)(rt,{data:Z.body==null?{type:"none",language:"json",content:"",datas:[]}:Z.body,height:"100%",ref:u,effective:a.effective,onChange:h,className:Ue.body,bodyRawClassName:Ue.bodyRow})})}];return(0,e.jsx)("div",{className:X()(Ue.requestViewContainer),children:(0,e.jsx)("div",{className:"requestViewContainerTabs",children:(0,e.jsx)(na.Z,{activeKey:p||i||"Body",items:D,onChange:I})})})})),la=st,lt=f(80006),U=f(26412),it={responseViewContainer:"responseViewContainer___rJpX2",responseViewContainerTabs:"responseViewContainerTabs___WQkCL","ant-tabs":"ant-tabs___fa2qw","ant-tabs-nav":"ant-tabs-nav___NMZ5p","ant-tabs-content-holder":"ant-tabs-content-holder___XXpr1","ant-tabs-content":"ant-tabs-content___YBjJ0","ant-tabs-tabpane-active":"ant-tabs-tabpane-active___iegdY"},ot=f(57632);function ve(a){return a==null||typeof a=="undefined"||Object.keys(a).length===0}var ut=[{title:(0,N.ZP)("http.columns.param"),dataIndex:"key",width:"20%"},{title:(0,N.ZP)("http.columns.val"),dataIndex:"val",width:"80%",ellipsis:!0}],xe=function(n){return(0,e.jsx)(lt.Z,{dataSource:Object.entries(n||{}).map(function(t){var o=x()(t,2),r=o[0],u=o[1];return{key:r,val:u}}),columns:ut,search:!1,pagination:!1,options:{density:!1,reload:!1,search:!1,setting:!1}})},ct={POST:"magenta",GET:"green",DELETE:"red",PUT:"volcano",HEAD:"orange",PATCH:"lime",OPTIONS:"blue"},dt=function(n){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(U.Z,{column:1,children:(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)("b",{children:(0,N.ZP)("http.text.url")}),children:n.url})}),(0,e.jsxs)(U.Z,{column:3,children:[(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)("b",{children:(0,N.ZP)("http.text.method")}),children:(0,e.jsx)(qe.Z,{color:ct[n.method?n.method.toUpperCase():"GET"],children:n.method})}),(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)("b",{children:(0,N.ZP)("http.text.status")}),children:n.statusCode}),(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)("b",{children:(0,N.ZP)("http.text.statusDesc")}),children:n.statusName})]}),!ve(n.rests)&&(0,e.jsxs)(U.Z,{column:1,children:[(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)("b",{children:(0,N.ZP)("http.data.rests")}),children:" "}),(0,e.jsxs)(U.Z.Item,{children:[" ",xe(n.rests)]})]}),!ve(n.params)&&(0,e.jsxs)(U.Z,{column:1,children:[(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)("b",{children:(0,N.ZP)("http.data.params")}),children:" "}),(0,e.jsxs)(U.Z.Item,{children:[" ",xe(n.params)]})]}),!ve(n.cookies)&&(0,e.jsxs)(U.Z,{column:1,children:[(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)("b",{children:"cookies"}),children:" "}),(0,e.jsxs)(U.Z.Item,{children:[" ",xe(n.cookies)]})]}),!ve(n.headers)&&(0,e.jsxs)(U.Z,{column:1,children:[(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)("b",{children:(0,N.ZP)("http.data.headers")}),children:" "}),(0,e.jsxs)(U.Z.Item,{children:[" ",xe(n.headers)]})]}),!ve(n.body)&&(0,e.jsxs)(U.Z,{column:1,children:[(0,e.jsx)(U.Z.Item,{label:(0,e.jsx)("b",{children:(0,N.ZP)("http.data.body")}),children:" "}),(0,e.jsx)(U.Z.Item,{children:(0,e.jsx)("div",{style:{width:"100%",height:200},children:(0,e.jsx)(ue.Z,{language:n.reqType,defaultValue:n.body,options:{readOnly:!0}})})})]})]})},ft=function(n){var t=(0,d.useState)(null),o=x()(t,2),r=o[0],u=o[1];(0,d.useEffect)(function(){u((0,ot.Z)())},[]);var s=[{label:(0,e.jsx)(te.Z,{dot:!0,color:"lime",children:"\u5B9E\u9645\u8BF7\u6C42"}),key:"base",children:dt(n)},{label:ve(n.reHeaders)?(0,e.jsx)(e.Fragment,{children:(0,N.ZP)("http.data.resheaders")}):(0,e.jsx)(te.Z,{dot:!0,color:"lime",children:(0,N.ZP)("http.data.resheaders")}),key:"reHeaders",children:xe(n.reHeaders)},{label:ve(n.reCookies)?(0,e.jsx)(e.Fragment,{children:(0,N.ZP)("http.data.recookies")}):(0,e.jsx)(te.Z,{dot:!0,color:"lime",children:(0,N.ZP)("http.data.recookies")}),key:"reCookies",children:xe(n.reCookies)},{label:(0,e.jsx)(te.Z,{dot:!0,color:"lime",children:"\u8FD4\u56DE\u503C"}),key:"reData",children:(0,e.jsx)(ue.Z,{language:n.reType,defaultValue:n.resData,options:{readOnly:!0}})}];return(0,e.jsx)(na.Z,{items:s,defaultActiveKey:"reData"},n.uuid)},ht=function(n){return(0,e.jsxs)("div",{className:X()(it.responseViewContainer),children:[n.data==null&&(0,e.jsx)(e.Fragment,{children:"\u6CA1\u6709\u6570\u636E"}),n.data!=null&&(0,e.jsx)("div",{className:"responseViewContainerTabs",children:ft(n.data)})]})},vt=ht,pt=f(62036),He=f(45198),ia=f(6591),Re=Se.Z.Option,Le={GET:"blue",POST:"green",PUT:"orange",DELETE:"red"};function mt(a,n){var t=(0,W.vo)(),o=(0,d.useRef)(),r=Me.Z.useForm(),u=x()(r,1),s=u[0],c=(0,d.useState)(a.consoleInfo.page),l=x()(c,2),i=l[0],v=l[1],m=a.httpPage,P=a.dispatch,p=a.consoleInfo,b=(0,d.useState)(m.showResult),R=x()(b,2),S=R[0],Z=R[1],A=(0,d.useState)(p.data==null?{method:"GET",body:{type:"none",language:"json",datas:[]},rests:[],headers:[],cookices:[]}:p.data),I=x()(A,2),h=I[0],g=I[1];(0,d.useEffect)(function(){Z(m.showResult)},[m.showResult]);var D=(0,De.Z)(function(E,y){y(E)},{wait:100}),w=D.run;function j(E){P({type:"httpPage/setConsoleData",payload:{key:p.key,data:E}})}(0,d.useEffect)(function(){j(h)},[h]);var O=(0,e.jsxs)(Se.Z,{className:q.httpMethod,defaultValue:h.method,style:{width:80},onChange:function(y){var T=h;T.method=y,g(B()({},T))},children:[(0,e.jsx)(Re,{value:"GET",className:q.boldText,style:{color:Le.GET},children:"GET"}),(0,e.jsx)(Re,{value:"POST",className:q.boldText,style:{color:Le.POST},children:"POST"}),(0,e.jsx)(Re,{value:"PUT",className:q.boldText,style:{color:Le.PUT},children:"PUT"}),(0,e.jsx)(Re,{value:"DELETE",className:q.boldText,style:{color:Le.DELETE},children:"DELETE"})]}),G=function(){var E=M()(k()().mark(function y(){var T;return k()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(o.current==null){C.next=6;break}return C.next=3,o.current.getData();case 3:if(T=C.sent,T.flag){C.next=6;break}return C.abrupt("return",!1);case 6:return C.abrupt("return",!0);case 7:case"end":return C.stop()}},y)}));return function(){return E.apply(this,arguments)}}(),se=function(){var E=M()(k()().mark(function y(){return k()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return s.validateFields().then(function(){var C=M()(k()().mark(function K(ma){var ne,Qe,ce,de;return k()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ne=B()({},h),ne.projectCode=t==null?void 0:t.code,ne.id=parseInt(p.key),ne.parentId=p.data.parentId==null||p.data.parentId==null?0:p.data.parentId,ne.name=p.name,ae.next=7,G();case 7:Qe=ae.sent,Qe&&(ce=p.status,de=p.status==He.ConsoleStatus.UNTRACKED?"httpPage/saveApi":"httpPage/updateApi",P({type:de,payload:ne,callback:function(Je){if(Je!=null){if(P({type:"httpPage/saveConsoleData",payload:{key:p.key,data:Je}}),ce==He.ConsoleStatus.UNTRACKED){var On={index:p.key,isFolder:!1,children:[],data:Je,canRename:!1,canMove:!1};P({type:"httpPage/putTree",payload:{oldParentId:void 0,parentId:ne.parentId,node:On}})}return!0}}}));case 9:case"end":return ae.stop()}},K)}));return function(K){return C.apply(this,arguments)}}()).catch(function(C){console.log(C)}),F.abrupt("return",!1);case 2:case"end":return F.stop()}},y)}));return function(){return E.apply(this,arguments)}}(),L=function(){var E=M()(k()().mark(function y(){return k()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,G();case 2:if(F.sent){F.next=4;break}return F.abrupt("return");case 4:P({type:"httpPage/sendApi",payload:h,callback:function(K){K.projectCode=t==null?void 0:t.code,P({type:"httpPage/setSendResult",payload:{key:p.key,data:K}})}});case 5:case"end":return F.stop()}},y)}));return function(){return E.apply(this,arguments)}}();return(0,e.jsxs)("div",{className:X()(q.httpConsoleBox),children:[(0,e.jsx)("div",{className:X()(q.httpTar),children:(0,e.jsxs)(ie.Z,{style:{paddingTop:14},children:[(0,e.jsx)(V.Z,{span:3}),(0,e.jsx)(V.Z,{offset:1,span:13,children:(0,e.jsx)(Me.Z,{form:s,initialValues:{httpurl:h.url},onFinish:function(y){var T=y.form;T.validateFields().then(function(F){console.log("Validation passed:",F)}).catch(function(F){console.error("Validation failed:",F)})},children:(0,e.jsx)(Me.Z.Item,{name:"httpurl",rules:[{required:!0,message:""}],children:(0,e.jsx)(ta.Z,{size:"large",addonBefore:O,className:X()(q.httpInput),placeholder:"\u8BF7\u8F93\u5165URL",onChange:function(y){var T=h;T.url=y.target.value,g(B()({},T))}})})})}),(0,e.jsx)(V.Z,{span:3,children:(0,e.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center"},children:(0,e.jsx)(Pe.ZP,{type:"primary",size:"large",style:{width:80},onClick:function(){L()},children:"\u53D1\u9001"})})}),(0,e.jsx)(V.Z,{span:3,children:(0,e.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center"},children:(0,e.jsx)(Pe.ZP,{size:"large",hidden:p.status==He.ConsoleStatus.SAVED,style:{width:80},onClick:function(){se()},children:"\u4FDD\u5B58"})})})]})}),(0,e.jsxs)(ia.Z,{className:q.httpConsoleContainer,model:ia.B.SECOND,show:m.showResult,defaultSize:50,maxSize:100,minSize:0,secondShow:m.showResult,layout:"column",children:[(0,e.jsx)("div",{className:q.httpConsole,children:(0,e.jsx)(la,{data:h,ref:o,effective:!0,onDataChange:function(y){w(y,function(T){T.url=h.url,T.method=h.method,T.envCode=h.envCode,g(B()({},T))})},onPageChange:function(y){var T=i;T.activeKey=y},activeKey:i!=null?i.activeKey?i.activeKey:h.method=="GET"?"Params":"Body":void 0},"RequestView-"+p.key)}),(0,e.jsxs)("div",{className:q.httpConsoleResult,children:[i!=null&&i.resultData!=null&&(0,e.jsx)(vt,{data:i.resultData}),i!=null&&i.resultData==null&&(0,e.jsx)(pt.C,{state:"empty"})]})]})]})}var gt=mt;function Ct(a){var n=a.dispatch,t=a.httpPage,o=a.icon,r=t.consoles,u=(0,W.vo)(),s=(0,d.useMemo)(function(){return r==null?void 0:r.map(function(c){return{prefixIcon:o,label:c.name,key:c.key,status:c.status,editableName:!0,children:(0,e.jsx)(d.Fragment,{children:(0,e.jsx)(e.Fragment,{children:c.name})},c.key)}})},[r]);return(0,e.jsxs)("div",{className:be.httpPageRight,children:[!r.length&&(0,e.jsx)(aa.Z,{}),r.length>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:be.httpPageTabs,children:(0,e.jsx)(Ja.Z,{items:s,onChange:function(l){l!=t.activeKey&&n({type:"httpPage/setActiveKey",payload:l})},onSave:function(l){return!1},onEdit:function(l,i,v){if(i!=null){var m=i.map(function(P){return P.key});n({type:"httpPage/delConsole",payload:m})}},activeKey:t.activeKey,editableNameOnBlur:function(l){n({type:"httpPage/rename",payload:{name:l.label,id:parseInt(l.key+"")},callback:function(v){v!=null&&v!=null&&n({type:"httpPage/putTree",payload:{oldParentId:parseInt(l.key+""),parentId:parseInt(l.key+""),node:v}})}})}})}),(0,e.jsx)("div",{className:be.httpPageContent,children:r==null?void 0:r.map(function(c,l){return(0,e.jsx)("div",{className:X()(be.windowContent,Ce()({},be.concealTab,t.activeKey!==c.key)),hidden:t.activeKey!==c.key,children:(0,e.jsx)(gt,{httpPage:t,dispatch:n,consoleInfo:c},c.key)},c.key)})})]})]})}var jt=Ct,Ve=f(46540),oa=f(86111),yt=(0,oa.connect)(function(a){var n=a.httpPage;return{httpPage:n}}),ua=function(a){return a.DIR="DIR",a.API="API",a}({}),xt=function(n){return n===ua.DIR?"\uEAC5":"\uE63B"};function bt(a){var n=(0,d.useState)(!0),t=x()(n,2),o=t[0],r=t[1],u=a.httpPage,s=a.dispatch,c=(0,W.vo)(),l=function(v){v?s({type:"httpPage/loadTrees",payload:{projectCode:c==null?void 0:c.code}}):u.isLoaded||s({type:"httpPage/loadTrees",payload:{projectCode:c==null?void 0:c.code}})};return(0,d.useEffect)(function(){l(!1)},[]),(0,e.jsx)(Ve.Z,{className:Fa.httpPage,left:(0,e.jsx)(Qa,{dispatch:s,httpPage:u,recognizeIcon:xt,refresh:function(){l(!0)}}),rigth:(0,e.jsx)(jt,{dispatch:s,httpPage:u,icon:"\uE63B"}),leftShow:o,resultShow:u.showResult,changeLeftShow:function(){r(!o)},changeResultShow:function(){s({type:"httpPage/setShowResult",payload:!u.showResult})}})}var St=yt(bt),Pt=f(45120),Tt={},Ze={category:"category___Cy1v3",dcardsec:"dcardsec___xgC1G",icon:"icon___w7dI5",main:"main___kjdpz",activate:"activate___nVA0y"},Zt=f(76970),ca=f.n(Zt);function kt(a,n,t,o){var r=function(s,c){return(0,e.jsxs)("div",{className:X()(Ce()({},Ze.activate,t==n[s].code),Ze.dcardsec),onClick:function(){o(n[s].code)},children:[(0,e.jsx)("div",{className:Ze.icon,children:(0,e.jsx)(ge.Z,{size:16,code:n[s].icon})}),(0,e.jsx)("div",{className:Ze.main,children:n[s].name})]},c)};return(0,e.jsxs)("div",{style:{paddingTop:10,paddingBottom:10},children:[(0,e.jsx)("div",{className:Ze.category,children:a}),(0,e.jsx)("div",{children:(0,e.jsx)(ca(),{itemRenderer:r,length:n.length,type:"uniform"})})]},a)}function wt(a){return(0,e.jsx)(e.Fragment,{children:a.toolsTree.map(function(n){return kt(n.category,n.tools,a.toolCode,a.setToolCode)})})}var Et=wt,$e={toolsRight:"toolsRight____seNg",title:"title___Vvn1x",body:"body___mDNUv"};function It(a){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:$e.toolsRight,hidden:a.hidden,children:[(0,e.jsx)("div",{className:$e.title,children:a.toolName}),(0,e.jsx)("div",{className:$e.body,children:a.itemContainer})]})})}var Nt=It,H={sqlCheck:"sqlCheck___EbjW5",line:"line___w40fh",row:"row___LWa0q",title:"title___I0YHk",character:"character___cRG4v",left:"left___aBQLH",leftIcon:"leftIcon___PsRu9",right:"right___AY2Gy",rightSelect:"rightSelect___XQx_C",fileSelecter:"fileSelecter___pgp7w",search:"search___cIAyU",searchBtn:"searchBtn___vj5kY",sqlCheckTop:"sqlCheckTop___nIp22",sqlCheckBottom:"sqlCheckBottom___NEcru",editor:"editor___hWIk7"},Dt=f(64082),da=f(68795),Rt=f(44856),Lt=function(){var n=localStorage.getItem("tools-fileSearch");return n?JSON.parse(n).keys:[]},Ft=function(n){var t={keys:n};return localStorage.setItem("tools-fileSearch",JSON.stringify(t))};function At(){var a=(0,d.useState)([]),n=x()(a,2),t=n[0],o=n[1],r=(0,d.useRef)(null),u=Lt(),s=(0,d.useState)(u),c=x()(s,2),l=c[0],i=c[1],v=(0,d.useState)("gb2312"),m=x()(v,2),P=m[0],p=m[1];(0,d.useEffect)(function(){Ft(l)},[l]);function b(I,h){var g,D=[],w=1;h.split(`
`).forEach(function(O){var G=O.trim();G!==""&&l.forEach(function(se){if(G.includes(se)){D.push(w+" \u884C "+G);return}}),w+=1});var j="";D.length>0?(j="\u5F00\u59CB --------------------- "+I,D.forEach(function(O){j=j+`
	`+O}),j=j+`
\u7ED3\u675F --------------------- `+I):j="\u672A\u627E\u5230 --------------------- "+I,(g=r.current)===null||g===void 0||g.setValue(j+`
`,"end")}var R=function(h){o(h.fileList)},S=function(){for(var h=function(){var w=t[g],j=new FileReader;j.onload=function(O){O!=null&&O.target!=null&&b(w.name,O.target.result)},j.readAsText(w.originFileObj,P)},g=0;g<t.length;g++)h()},Z=function(){var h;(h=r.current)===null||h===void 0||h.setValue("","cover"),setTimeout(function(){S()},0)},A={name:"file",accept:".sql,.txt",multiple:!0,onChange:R,beforeUpload:function(h){var g=h.type,D=g==="text/plain"||g==="application/sql"||h.name.endsWith(".sql")||h.name.endsWith(".txt");return D||Ne.ZP.error("\u53EA\u80FD\u4E0A\u4F20 SQL \u6587\u4EF6\u6216\u6587\u672C\u6587\u4EF6\uFF01"),!1},showUploadList:!0};return(0,e.jsxs)("div",{className:H.sqlCheck,children:[(0,e.jsxs)("div",{className:H.sqlCheckTop,children:[(0,e.jsx)("div",{className:H.title,children:"\u914D\u7F6E"}),(0,e.jsx)("div",{className:H.line,children:(0,e.jsxs)("div",{className:H.character,children:[(0,e.jsxs)("div",{className:H.left,children:[(0,e.jsx)("div",{className:H.leftIcon,children:(0,e.jsx)(ge.Z,{size:16,code:"\uE61F"})}),(0,e.jsx)("div",{className:H.leftTitle,children:"\u5B57\u7B26\u96C6"})]}),(0,e.jsx)("div",{className:H.right,children:(0,e.jsx)(Se.Z,{className:H.rightSelect,defaultValue:P,style:{width:100},onChange:function(h){p(h)},options:[{value:"UTF-8",label:"UTF-8"},{value:"GBK",label:"GBK"},{value:"gb2312",label:"GB2312"},{value:"disabled",label:"ISO-8859-1"}]})})]})}),(0,e.jsx)("div",{className:H.title,children:"\u6587\u4EF6"}),(0,e.jsx)("div",{className:H.line,children:(0,e.jsx)("div",{className:H.fileSelecter,children:(0,e.jsxs)(Rt.Z,B()(B()({},A),{},{children:[(0,e.jsx)("p",{className:"ant-upload-drag-icon",children:(0,e.jsx)(Dt.Z,{})}),(0,e.jsx)("p",{className:"ant-upload-text",children:"\u70B9\u51FB\u6216\u5C06\u6587\u4EF6\u62D6\u5165\u6B64\u5904"}),(0,e.jsx)("p",{className:"ant-upload-hint",children:"\u53EA\u652F\u6301sql\u3001txt\u6587\u4EF6"})]}))})}),(0,e.jsx)("div",{className:H.title,children:"\u5173\u952E\u5B57"}),(0,e.jsxs)("div",{className:X()(H.line,H.row),style:{width:"100%"},children:[(0,e.jsx)("div",{style:{width:"90%"},children:(0,e.jsx)(Se.Z,{mode:"tags",variant:"filled",defaultValue:u,onChange:function(h){i(h)},style:{width:"100%",minHeight:30}})}),(0,e.jsx)("div",{className:H.search,style:{width:"10%",height:"100%"},children:(0,e.jsx)(Pe.ZP,{style:{height:"100%"},className:H.searchBtn,icon:(0,e.jsx)(da.Z,{}),onClick:Z,children:"\u641C\u7D22"})})]})]}),(0,e.jsxs)("div",{className:H.sqlCheckBottom,children:[(0,e.jsx)("div",{className:H.title,children:"\u7ED3\u679C"}),(0,e.jsx)("div",{className:H.editor,children:(0,e.jsx)(ue.Z,{ref:r,language:"text",defaultValue:"",options:{}})})]})]})}var Ot=At,fa=[{category:"\u6587\u4EF6\u7C7B",tools:[{code:"fileSearch",name:"\u5185\u5BB9\u68C0\u7D22",icon:"\uE64E",container:(0,e.jsx)(Ot,{})}]}];function Bt(){var a=[];return fa.map(function(n){n.tools.map(function(t){a.push(t)})}),a}var Mt=Bt();function Ut(){var a=(0,d.useState)(!0),n=x()(a,2),t=n[0],o=n[1],r=(0,d.useState)("fileSearch"),u=x()(r,2),s=u[0],c=u[1];return(0,e.jsx)(Ve.Z,{className:Tt.httpPage,left:(0,e.jsx)(Et,{toolCode:s,toolsTree:fa,setToolCode:function(i){c(i)}}),rigth:s!=null?Mt.map(function(l){return(0,e.jsx)(Nt,{hidden:l.code!=s,toolCode:l.code,toolName:l.name,itemContainer:l.container},l.code)}):(0,e.jsx)(aa.Z,{}),leftShow:t,resultHide:!0,changeLeftShow:function(){o(!t)}})}var Kt=Ut,Ht={},ke={metaLeft:"metaLeft___M3EMe",dcardsec:"dcardsec___HvCiT",icon:"icon___aYV0e",main:"main____cS2F",activate:"activate___h7IAj"};function Vt(a){var n=a.metaMenus,t=a.activeKey,o=a.setActiveCode,r=function(s,c){return(0,e.jsxs)("div",{className:X()(Ce()({},ke.activate,t==n[s].code),ke.dcardsec),onClick:function(){o(n[s].code)},children:[(0,e.jsx)("div",{className:ke.icon,children:(0,e.jsx)(ge.Z,{size:16,code:n[s].icon})}),(0,e.jsx)("div",{className:ke.main,children:n[s].name})]},c)};return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("div",{className:ke.metaLeft,children:(0,e.jsx)(ca(),{itemRenderer:r,length:n.length,type:"uniform"})})})}var $t=Vt,Fe={metaRight:"metaRight___qMqon",title:"title___FpGaL",titleName:"titleName___LZ37X",body:"body___vGLIp"};function zt(a){var n=(0,De.Z)(function(o,r){r(o)},{wait:200}),t=n.run;return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:Fe.metaRight,hidden:a.hidden,children:[(0,e.jsx)("div",{className:Fe.title,children:(0,e.jsxs)(ie.Z,{children:[(0,e.jsx)(V.Z,{span:20,className:Fe.titleName,children:a.titleName}),(0,e.jsx)(V.Z,{span:4,hidden:a.setSearchKey,children:(0,e.jsx)(ta.Z,{placeholder:"\u641C\u7D22",prefix:(0,e.jsx)(da.Z,{style:{fontSize:18}}),defaultValue:a.searchKey,variant:"borderless",onChange:function(r){t(r.target.value,function(u){a.setSearchKey(r.target.value)})}})})]})}),(0,e.jsx)("div",{className:Fe.body,children:a.itemContainer})]})})}var Gt=zt,Ae={paramPool:"paramPool___sOp3a",paramContainer:"paramContainer___MD8AE",dcardsec:"dcardsec___e_i7O",tagRightTop:"tagRightTop___XhWsP",main:"main___fXK_E",head:"head___bCOre",body:"body___RsCrm",icon:"icon___fSyUB",env_div:"env_div___lYe4D"},Qt=f(50361),ha=f.n(Qt),va=f(86548),Jt=f(48689),pa=f(24969),ze=f(97269),Xt=f(90672),Yt=(0,d.forwardRef)(function(a,n){var t=(0,d.useState)(a.data?a.data:{}),o=x()(t,2),r=o[0],u=o[1],s=(0,d.useRef)(),c=(0,d.useRef)();return(0,d.useImperativeHandle)(n,function(){return{getData:function(){var l=M()(k()().mark(function v(){var m,P,p,b;return k()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(c.current==null){S.next=7;break}return S.next=3,c.current.getData();case 3:if(p=S.sent,p.flag!=!1){S.next=6;break}return S.abrupt("return",{flag:!1,data:r});case 6:r.params=p.data;case 7:return S.next=9,(m=s.current)===null||m===void 0||(P=m.validateFieldsReturnFormatValue)===null||P===void 0?void 0:P.call(m);case 9:return b=S.sent,r.code=b.code,r.name=b.name,r.remark=b.remark,S.abrupt("return",{flag:!0,data:r});case 14:case"end":return S.stop()}},v)}));function i(){return l.apply(this,arguments)}return i}()}}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(ze.A,{formRef:s,initialValues:r,submitter:{render:function(i,v){return[]}},children:[(0,e.jsx)(oe.Z,{name:"code",label:"\u7F16\u7801",disabled:r.id!=null,rules:[{required:!0,message:"\u7F16\u7801"+(0,N.ZP)("case.label.notNull")},{pattern:/^[a-zA-Z]\w{0,20}$/,message:"\u5FC5\u987B\u4EE5\u5B57\u6BCD\u5F00\u5934"}],fieldProps:{maxLength:10,minLength:2,onChange:function(i){r.code=i.target.value,u(r)}}}),(0,e.jsx)(oe.Z,{name:"name",label:"\u540D\u79F0",rules:[{required:!0,message:"\u540D\u79F0"+(0,N.ZP)("case.label.notNull")}],fieldProps:{maxLength:10,minLength:2,onChange:function(i){r.name=i.target.value,u(r)}}}),(0,e.jsx)(Xt.Z,{name:"remark",label:"\u5907\u6CE8",rules:[{required:!0,message:"\u5907\u6CE8"+(0,N.ZP)("case.label.notNull")}],fieldProps:{onChange:function(i){r.remark=i.target.value,u(r)}}})]}),(0,e.jsx)(ee,{params:r!=null&&r.params?r.params:[],ref:c})]})}),_t=Yt,Wt=he.Z.Meta,qt=function(n,t){var o=[];if(t==null&&t==null)o=[];else if(n==null||n=="")o=ha()(t);else for(var r=0;r<t.length;r++){var u=t[r];(u.name&&u.name.toUpperCase().includes(n.toUpperCase())||u.code&&u.code.toUpperCase().includes(n.toUpperCase())||u.remark&&u.remark.toUpperCase().includes(n.toUpperCase()))&&o.push(u)}return o!=null&&o.push({code:"+"}),o};function en(a){var n,t,o=(0,d.useRef)(),r=a.appPage,u=a.dispatch,s=(0,d.useState)(-1),c=x()(s,2),l=c[0],i=c[1],v=(0,d.useState)(!1),m=x()(v,2),P=m[0],p=m[1],b=(0,d.useState)(!1),R=x()(b,2),S=R[0],Z=R[1],A=qt(a.searchKey,(n=r.curProject)===null||n===void 0?void 0:n.environments);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:Ae.paramPool,children:(0,e.jsx)("div",{className:Ae.paramContainer,children:(0,e.jsx)(je.Z,{grid:{gutter:16,xs:2,sm:2,md:3,lg:4,xl:4,xxl:5},dataSource:A,renderItem:function(h,g){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(je.Z.Item,{children:[g!=A.length-1&&(0,e.jsx)(he.Z,{style:{width:"100%",height:115},actions:[(0,e.jsx)(va.Z,{onClick:function(){i(g),p(!0)}},"edit"),(0,e.jsx)(Jt.Z,{onClick:function(){i(g),Z(!0)}},"del")],children:(0,e.jsx)(Wt,{title:h.code+"-"+h.name,description:(0,e.jsx)("div",{className:Ae.ellipsis,children:h.remark})})},Math.random()*1e16),g==A.length-1&&(0,e.jsx)(he.Z,{children:(0,e.jsx)(Pe.ZP,{type:"text",block:!0,style:{width:"100%",height:82},onClick:function(){i(-1),p(!0)},children:(0,e.jsx)(pa.Z,{style:{fontSize:"22px"}})})},Math.random()*1e16)]})})}})})}),(0,e.jsx)(Ee.Z,{title:"\u914D\u7F6E\u73AF\u5883",width:750,open:P,destroyOnClose:!0,onOk:M()(k()().mark(function I(){var h,g,D;return k()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(o.current==null){j.next=7;break}return j.next=3,o.current.getData();case 3:g=j.sent,D=g.data,D.projectCode=(h=r.curProject)===null||h===void 0?void 0:h.code,u({type:"appPage/saveEnvironment",payload:{index:l,data:g.data},callback:function(){i(-1),p(!1)}});case 7:case"end":return j.stop()}},I)})),onCancel:function(){p(!1)},maskClosable:!1,okText:(0,N.ZP)("case.button.ok"),cancelText:(0,N.ZP)("case.button.cancel"),children:(0,e.jsx)("div",{className:Ae.env_div,children:(0,e.jsx)(_t,{data:l>-1&&P?JSON.parse(JSON.stringify((t=r.curProject)===null||t===void 0?void 0:t.environments[l])):{},ref:o})})})]})}var an=en,re={paramPool:"paramPool___VKpvh",paramContainer:"paramContainer___ZyS5t",dcardsec:"dcardsec___ofwmB",tagRightTop:"tagRightTop___T1Lyv",main:"main___nG4is",head:"head___iO5Qp",body:"body___HxMLk",icon:"icon___vQEhb"},tn=f(50962),Ge=f(64317),nn=f(31199),rn=f(34286),sn=function(n,t){return(0,d.useImperativeHandle)(t,function(){return{getData:function(){var o=M()(k()().mark(function u(){return k()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",{flag:!0,data:{}});case 1:case"end":return c.stop()}},u)}));function r(){return o.apply(this,arguments)}return r}()}}),(0,e.jsx)(e.Fragment,{})},ln=sn,on=(0,d.forwardRef)(function(a,n){var t=(0,d.useState)(a.data.extraInto?a.data:B()(B()({},a.data),{},{extraInto:{bound:""}})),o=x()(t,2),r=o[0],u=o[1];return(0,d.useImperativeHandle)(n,function(){return{getData:function(){var s=M()(k()().mark(function l(){return k()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(r.extraInto.bound!=""){v.next=2;break}return v.abrupt("return",{flag:!1,data:r});case 2:return console.log(r.extraInto.bound),v.abrupt("return",{flag:!0,data:{bound:r.extraInto.bound}});case 4:case"end":return v.stop()}},l)}));function c(){return s.apply(this,arguments)}return c}()}}),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(U.Z,{column:1,layout:"vertical",children:(0,e.jsx)(U.Z.Item,{label:(0,e.jsxs)("label",{children:[(0,e.jsx)("span",{style:{color:"#f00"},children:"* "}),"SQL\u811A\u672C"]}),children:(0,e.jsx)("div",{style:{height:200,width:"100%"},children:(0,e.jsx)(ue.Z,{language:"sql",defaultValue:r.extraInto.bound,onChange:function(c){var l=r;l.extraInto.bound=c,u(l)}})})})})})}),un=on,cn=(0,d.forwardRef)(function(a,n){return(0,d.useImperativeHandle)(n,function(){return{getData:function(){var t=M()(k()().mark(function r(){return k()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",{flag:!0,data:{code:"CheckObj"}});case 1:case"end":return s.stop()}},r)}));function o(){return t.apply(this,arguments)}return o}()}}),(0,e.jsx)(e.Fragment,{children:" "})}),dn=cn;function fn(a,n){return(0,d.useImperativeHandle)(n,function(){return{getData:function(){var t=M()(k()().mark(function r(){return k()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",{flag:!0,data:{code:"Check"}});case 1:case"end":return s.stop()}},r)}));function o(){return t.apply(this,arguments)}return o}()}}),(0,e.jsx)(e.Fragment,{})}var hn=(0,d.forwardRef)(fn),vn=[{value:"GET",label:"GET"},{value:"POST",label:"POST"},{value:"PUT",label:"PUT"},{value:"DELETE",label:"DELETE"}],pn=(0,d.forwardRef)(function(a,n){var t=(0,d.useRef)(),o=(0,d.useRef)(),r=(0,d.useState)(a.data.extraInto==null||a.data.extraInto.httpModel==null?{method:"GET"}:a.data.extraInto.httpModel),u=x()(r,2),s=u[0],c=u[1];return(0,d.useImperativeHandle)(n,function(){return{getData:function(){var l=M()(k()().mark(function v(){var m,P,p,b,R;return k()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,(m=o.current)===null||m===void 0||(P=m.validateFieldsReturnFormatValue)===null||P===void 0?void 0:P.call(m);case 2:if(p=Z.sent,t.current==null){Z.next=14;break}return Z.next=6,t.current.getData();case 6:if(b=Z.sent,b.flag){Z.next=9;break}return Z.abrupt("return",{flag:!1,data:s});case 9:return R=b.data,R.url=p.url,R.method=p.method,console.log({httpModel:R}),Z.abrupt("return",{flag:!0,data:{httpModel:R}});case 14:return Z.abrupt("return",{flag:!1,data:s});case 15:case"end":return Z.stop()}},v)}));function i(){return l.apply(this,arguments)}return i}()}}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ze.A,{formRef:o,submitter:!1,children:(0,e.jsxs)(ie.Z,{style:{marginTop:10},children:[(0,e.jsx)(V.Z,{span:6,children:(0,e.jsx)(Ge.Z,{name:"method",initialValue:s.method,options:vn,labelCol:{span:10},wrapperCol:{span:14},label:"\u8BF7\u6C42\u65B9\u5F0F",rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}],fieldProps:{value:s.method,onChange:function(i){var v=s;v.method=i,c(JSON.parse(JSON.stringify(v)))}}},"method")}),(0,e.jsx)(V.Z,{span:17,offset:1,children:(0,e.jsx)(oe.Z,{name:"url",label:"\u8BF7\u6C42\u8DEF\u5F84",labelCol:{span:4},wrapperCol:{span:20},initialValue:s.url,rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}],fieldProps:{value:s.url,onChange:function(i){var v=s;v.url=i.target.value,c(JSON.parse(JSON.stringify(v)))}}},"url")})]})}),(0,e.jsx)("div",{style:{height:300},children:(0,e.jsx)(la,{data:s,ref:t})})]})}),mn=pn,gn=(0,d.forwardRef)(function(a,n){var t=(0,d.useState)(a.data.extraInto?a.data:B()(B()({},a.data),{},{extraInto:{bound:""}})),o=x()(t,2),r=o[0],u=o[1];return(0,d.useImperativeHandle)(n,function(){return{getData:function(){var s=M()(k()().mark(function l(){return k()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(r.extraInto.bound!=""){v.next=2;break}return v.abrupt("return",{flag:!1,data:r});case 2:return console.log(r.extraInto.bound),v.abrupt("return",{flag:!0,data:{bound:r.extraInto.bound}});case 4:case"end":return v.stop()}},l)}));function c(){return s.apply(this,arguments)}return c}()}}),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(U.Z,{column:1,layout:"vertical",children:(0,e.jsx)(U.Z.Item,{label:(0,e.jsxs)("label",{children:[(0,e.jsx)("span",{style:{color:"#f00"},children:"* "}),"\u6587\u672C"]}),children:(0,e.jsx)("div",{style:{height:200,width:"100%"},children:(0,e.jsx)(ue.Z,{language:"freemarker2",defaultValue:r.extraInto.bound,onChange:function(c){var l=r;l.extraInto.bound=c,u(l)}})})})})})}),Cn=gn,jn=(0,d.forwardRef)(function(a,n){var t=(0,d.useState)(a.data.extraInto?a.data:B()(B()({},a.data),{},{extraInto:{bound:""}})),o=x()(t,2),r=o[0],u=o[1];return(0,d.useImperativeHandle)(n,function(){return{getData:function(){var s=M()(k()().mark(function l(){return k()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(r.extraInto.bound!=""){v.next=2;break}return v.abrupt("return",{flag:!1,data:r});case 2:return console.log(r.extraInto.bound),v.abrupt("return",{flag:!0,data:{bound:r.extraInto.bound}});case 4:case"end":return v.stop()}},l)}));function c(){return s.apply(this,arguments)}return c}()}}),(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(U.Z,{column:1,layout:"vertical",children:(0,e.jsx)(U.Z.Item,{label:(0,e.jsxs)("label",{children:[(0,e.jsx)("span",{style:{color:"#f00"},children:"* "}),"DataPack\u8BF7\u6C42"]}),children:(0,e.jsx)(ue.Z,{height:200,language:"datapack",defaultValue:r.extraInto.bound,onChange:function(c){var l=r;l.extraInto.bound=c,u(l)}})})})})}),yn=jn;function pe(a){if(a.toUpperCase()=="SLEEP"||a.toUpperCase()=="CHECK_OBJ"||a.toUpperCase()=="CHECK"||a.toUpperCase()=="SQL_BEGIN"||a.toUpperCase()=="SQL_COMMIT")return"MAP"}function me(a){return a.toUpperCase()=="SLEEP"||a.toUpperCase()=="CHECK_OBJ"||a.toUpperCase()=="CHECK"||a.toUpperCase()=="SQL_BEGIN"||a.toUpperCase()=="SQL_COMMIT"?1:-1}function xn(a){return a.toUpperCase()=="SLEEP"||a.toUpperCase()=="CHECK_OBJ"||a.toUpperCase()=="CHECK"}var bn=(0,d.forwardRef)(function(a,n){var t=a.data,o=(0,d.useRef)(),r=(0,d.useRef)();return(0,d.useImperativeHandle)(n,function(){return{getData:function(){var u=M()(k()().mark(function c(){var l,i;return k()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!xn(t.type)){m.next=4;break}t.params=[],m.next=9;break;case 4:if(r.current==null){m.next=9;break}return m.next=7,r.current.getData();case 7:l=m.sent,t.params=l.data;case 9:if(o.current==null){m.next=17;break}return m.next=12,o.current.getData();case 12:return i=m.sent,t.extraInto=i.data,m.abrupt("return",{flag:i.flag,data:t});case 17:return m.abrupt("return",{flag:!0,data:t});case 18:case"end":return m.stop()}},c)}));function s(){return u.apply(this,arguments)}return s}()}}),t.type.toUpperCase()=="SLEEP"?(0,e.jsx)(ln,{data:t,ref:o}):t.type.toUpperCase()=="SQL_BEGIN"||t.type.toUpperCase()=="SQL_COMMIT"?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ee,{params:t!=null&&t.params?t.params:[],ref:r})}):t.type.toUpperCase()=="SQL"||t.type.toUpperCase()=="SQL_CALL"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ee,{params:t!=null&&t.params?t.params:[],ref:r}),(0,e.jsx)(un,{data:t,ref:o})]}):t.type.toUpperCase()=="CHECK_OBJ"?(0,e.jsx)(dn,{data:t,ref:o}):t.type.toUpperCase()=="CHECK"?(0,e.jsx)(hn,{data:t,ref:o}):t.type.toUpperCase()=="HTTP"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ee,{params:t!=null&&t.params?t.params:[],ref:r}),(0,e.jsx)(mn,{data:t,ref:o})]}):t.type.toUpperCase()=="CONST"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ee,{params:t!=null&&t.params?t.params:[],ref:r}),(0,e.jsx)(Cn,{data:t,ref:o})]}):t.type.toUpperCase()=="APP"?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ee,{params:t!=null&&t.params?t.params:[],ref:r}),(0,e.jsx)(yn,{data:t,ref:o})]}):(0,e.jsx)(e.Fragment,{children:"\u8BF7\u5904\u7406"+t.type.toUpperCase()})}),Sn=bn,Pn=function(){var n=[{value:"STRING",label:"\u5B57\u7B26\u4E32"},{value:"NUMBER",label:"\u6570\u5B57"},{value:"BOLL",label:"\u5E03\u5C14"},{value:"MAP",label:"\u952E\u503C\u5BF9"},{value:"TIME_HMS",label:"\u65F6\u5206\u79D2"},{value:"TIME_YMD",label:"\u5E74\u6708\u65E5"},{value:"TIME_YMDHMS",label:"\u5E74\u6708\u65E5\u65F6\u5206\u79D2"}];return n},Tn=(0,d.forwardRef)(function(a,n){var t=(0,d.useRef)(),o=(0,d.useRef)(),r=(0,d.useState)(a.data),u=x()(r,2),s=u[0],c=u[1];return(0,d.useImperativeHandle)(n,function(){return{getData:function(){var l=M()(k()().mark(function v(){var m,P,p,b;return k()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(m=o.current)===null||m===void 0||(P=m.validateFieldsReturnFormatValue)===null||P===void 0?void 0:P.call(m);case 2:if(p=S.sent,t.current==null){S.next=15;break}return S.next=6,t.current.getData();case 6:return b=S.sent,b.data.code=p.code,b.data.name=p.name,b.data.type=p.type,b.data.complex=p.complex,b.data.dataType=p.dataType,S.abrupt("return",b);case 15:return S.abrupt("return",{flag:!0,data:{}});case 16:case"end":return S.stop()}},v)}));function i(){return l.apply(this,arguments)}return i}()}}),(0,d.useImperativeHandle)(n,function(){return{getData:function(){var l=M()(k()().mark(function v(){var m,P,p,b;return k()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(m=o.current)===null||m===void 0||(P=m.validateFieldsReturnFormatValue)===null||P===void 0?void 0:P.call(m);case 2:if(p=S.sent,t.current==null){S.next=15;break}return S.next=6,t.current.getData();case 6:return b=S.sent,b.data.code=p.code,b.data.name=p.name,b.data.type=p.type,b.data.complex=p.complex,b.data.dataType=p.dataType,S.abrupt("return",b);case 15:return S.abrupt("return",{flag:!0,data:{}});case 16:case"end":return S.stop()}},v)}));function i(){return l.apply(this,arguments)}return i}()}}),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(ze.A,{formRef:o,submitter:!1,children:[(0,e.jsxs)(ie.Z,{children:[(0,e.jsx)(V.Z,{span:11,children:(0,e.jsx)(oe.Z,{label:"\u7F16\u7801",tooltip:"\u7F16\u7801\u91CD\u590D\u4F1A\u8986\u76D6\u9700\u8981\u53C2\u8003\u8986\u76D6\u7B56\u7565",name:"code",disabled:s.id!=null,labelCol:{span:4},wrapperCol:{span:19,offset:1},rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"},{pattern:/^[a-zA-Z]([-_a-zA-Z0-9]{1,30})$/,message:"30\u4F4D\u4EE5\u5185\u5FC5\u987B\u4EE5\u5B57\u6BCD\u5F00\u5934"}],initialValue:s.code,fieldProps:{defaultValue:s.code,onChange:function(i){var v=s;v.name=i.target.value,c(JSON.parse(JSON.stringify(v)))}}})}),(0,e.jsx)(V.Z,{span:12,offset:1,children:(0,e.jsx)(oe.Z,{label:"\u540D\u79F0",name:"name",rules:[{required:!0}],initialValue:s.name,labelCol:{span:4},wrapperCol:{span:19,offset:1},fieldProps:{defaultValue:s.name,onChange:function(i){var v=s;v.name=i.target.value,c(v)}}})})]}),(0,e.jsxs)(ie.Z,{children:[(0,e.jsx)(V.Z,{span:7,children:(0,e.jsx)(Ge.Z,{options:rn._F,initialValue:s.type,rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}],name:"type",labelCol:{span:6},wrapperCol:{span:16,offset:2},label:"\u7C7B\u578B",disabled:s.id!=null,fieldProps:{onChange:function(i){var v=s;v.type=i,v.complex=me(s.type)!=-1?me(s.type):s.complex,v.dataType=pe(s.type)!=null?pe(s.type):s.dataType,c(JSON.parse(JSON.stringify(v)))}}})}),(0,e.jsx)(V.Z,{span:8,children:(0,e.jsx)(nn.Z,{label:"\u7ED3\u679C\u7EF4\u5EA6",name:"complex",min:0,max:2,labelCol:{span:8,offset:5},wrapperCol:{span:10},disabled:me(s.type)!=-1,initialValue:me(s.type)!=-1?me(s.type):s.complex==null?0:s.complex,rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}],fieldProps:{precision:0,defaultValue:me(s.type)!=-1?me(s.type):s.complex==null?0:s.complex,onChange:function(i){var v=i==null?0:i,m=s;m.complex=parseInt(v+""),c(m)}}})}),(0,e.jsx)(V.Z,{span:9,children:(0,e.jsx)(Ge.Z,{options:Pn(),rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}],initialValue:pe(s.type)!=null?pe(s.type):s.dataType==null?"STRING":s.dataType,name:"dataType",label:"\u7ED3\u679C\u7C7B\u578B",disabled:pe(s.type)!=null,labelCol:{span:7,offset:3},wrapperCol:{span:14},fieldProps:{defaultValue:pe(s.type)!=null?pe(s.type):s.dataType==null?"STRING":s.dataType,onChange:function(i){var v=s;v.dataType=i,c(v)}}})})]})]}),(0,e.jsx)(Sn,{data:s,ref:t})]})}),Zn=Tn,kn=function(n,t){var o=[];if(t==null&&t==null)o=[];else if(n==null||n=="")o=ha()(t);else for(var r=0;r<t.length;r++){var u=t[r];(u.name&&u.name.toUpperCase().includes(n.toUpperCase())||u.code&&u.code.toUpperCase().includes(n.toUpperCase())||u.remark&&u.remark.toUpperCase().includes(n.toUpperCase()))&&o.push(u)}return o!=null&&o.push({code:"+"}),o};function wn(a){var n,t,o=a.appPage,r=a.dispatch,u=(0,d.useState)(-1),s=x()(u,2),c=s[0],l=s[1],i=(0,d.useRef)(),v=(0,d.useState)(!1),m=x()(v,2),P=m[0],p=m[1],b=kn(a.searchKey,(n=o.curProject)===null||n===void 0?void 0:n.actions);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:re.paramPool,children:(0,e.jsx)("div",{className:re.paramContainer,children:(0,e.jsx)(je.Z,{grid:{gutter:16,xs:2,sm:2,md:3,lg:4,xl:4,xxl:5},dataSource:b,renderItem:function(S,Z){return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(je.Z.Item,{children:[Z!=b.length-1&&(0,e.jsxs)("div",{className:re.dcardsec,children:[(0,e.jsx)(tn.Z,{actionType:S.type,className:re.tagRightTop}),(0,e.jsxs)("div",{className:re.main,children:[(0,e.jsx)("div",{className:re.head,children:S.code}),(0,e.jsx)("div",{className:re.body,children:S.name})]}),(0,e.jsx)("div",{className:re.icon,children:(0,e.jsx)(va.Z,{onClick:function(){l(Z),p(!0)}})})]},S.code),Z==b.length-1&&(0,e.jsx)("div",{className:re.dcardsec,children:(0,e.jsx)(Pe.ZP,{type:"text",block:!0,style:{width:"100%",height:48},onClick:function(){l(-1),p(!0)},children:(0,e.jsx)(pa.Z,{style:{fontSize:"22px"}})})})]})})}})})}),(0,e.jsx)(Ee.Z,{title:"\u914D\u7F6E\u884C\u4E3A",width:820,open:P,destroyOnClose:!0,onOk:M()(k()().mark(function R(){var S,Z,A;return k()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(i.current==null){h.next=7;break}return h.next=3,i.current.getData();case 3:Z=h.sent,A=Z.data,A.projectCode=(S=o.curProject)===null||S===void 0?void 0:S.code,Z.flag&&r({type:"appPage/saveAction",payload:{index:c,data:Z.data},callback:function(){l(-1),p(!1)}});case 7:case"end":return h.stop()}},R)})),onCancel:function(){p(!1)},maskClosable:!1,okText:(0,N.ZP)("case.button.ok"),cancelText:(0,N.ZP)("case.button.cancel"),children:(0,e.jsx)(Zn,{data:c>-1&&P?JSON.parse(JSON.stringify((t=o.curProject)===null||t===void 0?void 0:t.actions[c])):{type:"HTTP",dataType:"MAP",extraInto:{}},ref:i})})]})}var En=wn,In=(0,oa.connect)(function(a){var n=a.appPage;return{appPage:n}});function Nn(a){var n=a.appPage,t=a.dispatch,o=(0,d.useState)(!0),r=x()(o,2),u=r[0],s=r[1],c=[{code:"paramPool",name:"\u73AF\u5883\u8BBE\u7F6E",icon:"\uE642",container:(0,e.jsx)(an,{appPage:n,searchKey:n.searchKey,dispatch:t})},{code:"actionPool",name:"\u884C\u4E3A\u8BBE\u7F6E",icon:"\uE68C",container:(0,e.jsx)(En,{appPage:n,searchKey:n.searchKey,dispatch:t})}],l=function(v){if(v){var m;t({type:"appPage/intiProject",payload:{projectCode:(m=(0,W.vo)())===null||m===void 0?void 0:m.code}})}else if(!n.isLoaded){var P;t({type:"appPage/intiProject",payload:{projectCode:(P=(0,W.vo)())===null||P===void 0?void 0:P.code}})}};return(0,d.useEffect)(function(){l(!1)},[]),(0,e.jsx)(Ve.Z,{className:Ht.metaPage,left:(0,e.jsx)($t,{metaMenus:c,activeKey:n.activeKey,setActiveCode:function(v){t({type:"appPage/setActiveKey",payload:v})}}),rigth:c.map(function(i){return(0,e.jsx)(Gt,{hidden:i.code!=n.activeKey,activeKey:i.code,titleName:i.name,searchKey:n.searchKey,itemContainer:i.container,setSearchKey:function(m){t({type:"appPage/setSearchKey",payload:m})}},i.code)}),leftShow:u,resultHide:!0,changeLeftShow:function(){s(!u)}})}var Dn=In(Nn),Rn=[{key:"case",isLoad:!1,name:"\u7528\u4F8B",iconFontSize:24,icon:"\uE6B6",component:(0,e.jsx)(Pt.Z,{})},{key:"meta",isLoad:!1,name:"\u7EC4\u4EF6\u5E93",icon:"\uE60F",iconFontSize:24,component:(0,e.jsx)(Dn,{})},{key:"http",isLoad:!1,name:"HTTP",icon:"\uE63B",iconFontSize:24,component:(0,e.jsx)(St,{})},{key:"tools",isLoad:!1,name:"\u767E\u5B9D\u7BB1",icon:"\uE64F",iconFontSize:24,component:(0,e.jsx)(Kt,{})}],Ln=(0,d.memo)(function(){var a,n=(0,W.vo)(),t=(0,we.s0)(),o=(0,d.useState)(Rn),r=x()(o,2),u=r[0],s=r[1],c=(0,d.useState)(),l=x()(c,2),i=l[0],v=l[1],m=Ye(function(w){return w.mainPageActiveTab}),P=(0,d.useState)(window.location.pathname.split("/")[1]||m),p=x()(P,2),b=p[0],R=p[1];Ea(),(0,Ta.r)(function(){S(m)},[m]),(0,d.useEffect)(function(){var w=u.findIndex(function(O){return"".concat(O.key)===b});if(w>-1){u[w].isLoad=!0,s($()(u));var j=window.location.origin+"/"+b;window.history.pushState({},"",j)}},[b]);var S=function(j){j==="github"?window.open("https://gitee.com/dromara/TestHub/","_blank"):(R(j),Sa(j))},Z=function(){(0,Ca.Kv)().then(function(){v(void 0),t("/login")})},A=(0,d.useState)(!1),I=x()(A,2),h=I[0],g=I[1],D=function(){return(0,e.jsx)(J.Z,{menu:{items:[{key:"1",label:(0,e.jsxs)("div",{className:z.userDropdown,onClick:Z,children:[(0,e.jsx)(ge.Z,{code:"\uE6B2"}),(0,N.ZP)("login.text.logout")]})}]},placement:"bottomRight",trigger:["click"],children:(0,e.jsx)("div",{className:z.userBox,children:(0,e.jsx)(ge.Z,{code:"\uE64C",className:z.questionIcon})})})};return(0,e.jsxs)("div",{className:z.page,children:[(0,e.jsxs)("div",{className:z.layoutLeft,children:[n!=null&&(0,e.jsx)("div",{style:{width:38,height:38},className:z.projectLogo,onClick:function(){g(!0)},children:(a=n.name)===null||a===void 0?void 0:a.charAt(0)}),n==null&&(0,e.jsx)(ga.Z,{size:48,onClick:function(){g(!0)},className:z.brandLogo}),(0,e.jsx)(La,{isOpen:h,callback:function(j){j&&location.reload(),g(!1)}}),(0,e.jsx)("ul",{className:z.navList,children:u.map(function(w){return(0,e.jsx)(Y.Z,{placement:"right",title:w.name,children:(0,e.jsxs)("li",{className:w.key==b?z.activeNav:z.nav,onClick:function(){return S(w.key)},children:[(0,e.jsx)(ge.Z,{size:w.iconFontSize,className:z.icon,code:w.icon}),(0,e.jsx)("div",{className:z.name,children:w.name})]})},w.key)})}),(0,e.jsxs)("div",{className:z.footer,children:[(0,e.jsx)(Y.Z,{placement:"right",title:"\u4E2A\u4EBA\u4E2D\u5FC3",children:(i==null?void 0:i.roleCode)!==ja.w.DESKTOP?D():null}),(0,e.jsx)(Pa.Z,{className:z.setIcon,noLogin:!1})]})]}),(0,e.jsx)("div",{className:z.layoutRight,children:u.map(function(w){return(0,e.jsx)("div",{className:z.componentBox,hidden:b!==w.key,children:w.isLoad?w.component:null},w.key)})})]})}),Fn=Ln},58839:function(Oe,le,f){f.d(le,{Kv:function(){return Q},n$:function(){return $}});var fe=f(61273),$=(0,fe.Z)("/api/user/login",{method:"post"}),Q=(0,fe.Z)("/api/oauth/logout_a",{method:"post"}),x=(0,fe.Z)("/api/oauth/user_a",{method:"get"})}}]);
