"use strict";(self.webpackChunkTestHub=self.webpackChunkTestHub||[]).push([[939],{41963:function(O,v,s){s.r(v),s.d(v,{default:function(){return se}});var d=s(9783),p=s.n(d),S=s(19632),C=s.n(S),M=s(15009),T=s.n(M),$=s(99289),U=s.n($),J=s(5574),h=s.n(J),i=s(67294),N=s(75891),E=s(2453),X=s(91978),g=s(23323),F=s(69677),L=s(71230),f=s(15746),Y=s(84567),j=s(14726),B=s(2487),A=s(85813),Q=s(66309),w=s(58839),n={loginPage:"loginPage___CqEFK",loginPlane:"loginPlane___Xsx21",login:"login___uVnVV",loginWelcome:"loginWelcome___ee8ui",whyLogin:"whyLogin___GGj7u",loginSetting:"loginSetting___ISI7O",setting:"setting___J5gJK",projectSelect:"projectSelect___RAusy",projectList:"projectList___FVlEI",cardList:"cardList___wqrIW",card:"card___M9Pg1",cardCurrent:"cardCurrent___yoB3n",cardAvatar:"cardAvatar___avWgk",projectListBtn:"projectListBtn___pVaE4",projectChangeTip:"projectChangeTip___t_33p",defaultPasswordTips:"defaultPasswordTips___tsq3C",loginForm:"loginForm___zrzcY",loginFormSubmit:"loginFormSubmit___ccmeh"},k=s(46659),b=s(93967),q=s.n(b),u=s(59680),x=s(19515),a=s(46773),e=s(85893),_=N.Z.Paragraph,he=N.Z.Text,fe=null,ee=function(){var ne=(0,i.useState)([]),D=h()(ne,2),te=D[0],re=D[1],le=(0,i.useState)(null),I=h()(le,2),o=I[0],ae=I[1],oe=(0,i.useState)(null),R=h()(oe,2),ie=R[0],ce=R[1],Z=(0,i.useRef)(null),P=(0,i.useRef)(null),ue=(0,i.useState)(""),z=h()(ue,2),de=z[0],H=z[1];(0,i.useEffect)(function(){(0,x.Ew)()},[]);var ge=function(t,l){t.remember?(0,a.ps)(t):(0,a.TT)()},y=function(t){if(t==null){console.error("\u4E3A\u4EC0\u4E48token\u6CA1\u4E86");return}(0,a.HE)(t);var l=(0,x.FK)();l.callback==null?window.location.href="/":window.location.href=l.callback,(0,x.c4)("/")},me=function(){o!=null&&((0,a.Ce)(o),y(ie))},ve=function(){var c=U()(T()().mark(function t(l){var r,V,W;return T()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return H(""),m.next=3,(0,w.n$)(l);case 3:r=m.sent,r.flag?(ce(r.token),(0,a.HE)(r.token),re(r.projectDtos),ge(l,r),V=(0,a.vo)(),V==null?r.projectDtos.length==1?((0,a.Ce)(r.projectDtos[0]),y(r.token)):K():(W=r.projectDtos.find(function(G){return G.code===G.code}),W?y(r.token):((0,a.U3)(),r.projectDtos.length==1?(0,a.Ce)(r.projectDtos[0]):K()))):(E.ZP.error(r.msg),H(r.msg));case 5:case"end":return m.stop()}},t)}));return function(l){return c.apply(this,arguments)}}(),K=function(){Z.current&&Z.current.next()};return(0,e.jsx)("div",{className:n.loginPage,children:(0,e.jsx)("div",{className:n.loginPlane,children:(0,e.jsxs)(X.Z,{dots:!1,ref:Z,className:n.carousel,children:[(0,e.jsxs)("div",{ref:P,children:[(0,e.jsxs)("div",{className:n.login,children:[(0,e.jsx)("div",{className:n.loginWelcome,children:"TestHub"}),(0,e.jsx)("div",{className:n.whyLogin,children:"\u7B2C\u4E8C\u61C2\u4F60\u7684\u81EA\u52A8\u5316\u6D4B\u8BD5\u5DE5\u5177"}),(0,e.jsxs)(g.Z,{className:n.loginForm,size:"large",onFinish:ve,initialValues:(0,a.bG)(),autoComplete:"off",children:[(0,e.jsx)(g.Z.Item,{className:n.loginFormItem,name:"userName",rules:[{required:!0,message:(0,u.ZP)("login.form.user.placeholder")}],children:(0,e.jsx)(F.Z,{autoComplete:"off",placeholder:(0,u.ZP)("login.form.user")})}),(0,e.jsx)(g.Z.Item,{name:"password",validateStatus:de?"error":"",rules:[{required:!0,message:(0,u.ZP)("login.form.password.placeholder")},{min:6,max:12,message:"\u5BC6\u78016\u523010\u4F4D"}],children:(0,e.jsx)(F.Z.Password,{placeholder:(0,u.ZP)("login.form.password")})}),(0,e.jsxs)(L.Z,{justify:"space-between",children:[(0,e.jsx)(f.Z,{children:(0,e.jsx)(g.Z.Item,{name:"remember",valuePropName:"checked",children:(0,e.jsx)(Y.Z,{children:"\u8BB0\u4F4F\u6211"})})}),(0,e.jsx)(f.Z,{children:(0,e.jsx)(g.Z.Item,{children:(0,e.jsx)(j.ZP,{type:"link",htmlType:"button",style:{fontSize:12},onClick:function(){E.ZP.warning("\u5C1A\u672A\u5F00\u53D1")},children:"\u5FD8\u8BB0\u5BC6\u7801"})})})]}),(0,e.jsx)("div",{className:n.defaultPasswordTips,children:(0,x.ap)()=="local"?"\u672C\u5730\u6A21\u5F0F\u7528\u6237\u540Dadmin\u5BC6\u7801123456":"\u8FDC\u7A0B\u6A21\u5F0F\u767B\u5F55\u4FE1\u606F\u8BF7\u54A8\u8BE2\u7BA1\u7406\u5458"}),(0,e.jsx)(j.ZP,{type:"primary",htmlType:"submit",className:n.loginFormSubmit,children:(0,u.ZP)("login.button.login")})]})]}),(0,e.jsx)("div",{className:n.loginSetting,children:(0,e.jsx)(k.Z,{className:n.setting,noLogin:!0,render:(0,e.jsx)(j.ZP,{type:"link",style:{fontSize:14},children:(0,u.ZP)("setting.title.setting")})})})]}),(0,e.jsx)("div",{children:(0,e.jsxs)("div",{className:n.projectSelect,style:{height:P.current?P.current.clientHeight:"100%"},children:[(0,e.jsx)("div",{className:n.projectList,children:(0,e.jsx)("div",{className:n.cardList,children:(0,e.jsx)(B.Z,{rowKey:"code",grid:{gutter:16,xs:1,sm:1,md:1,lg:1,xl:1,xxl:1},dataSource:C()(te),renderItem:function(t){var l;return(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(A.Z,{className:q()(n.card,p()({},n.cardCurrent,o!=null&&o.code==t.code)),onClick:function(){ae(t)},children:(0,e.jsx)(A.Z.Meta,{avatar:(0,e.jsx)("div",{className:n.cardAvatar,children:(l=t.name)===null||l===void 0?void 0:l.charAt(0)}),title:t.name,description:(0,e.jsx)(_,{className:n.item,ellipsis:{rows:1,tooltip:t.description},children:t.name})})})},t.code)}})})}),(0,e.jsx)("div",{className:n.projectListBtn,children:(0,e.jsxs)(L.Z,{justify:"end",children:[(0,e.jsx)(f.Z,{span:18,children:(0,e.jsxs)("div",{className:n.projectChangeTip,children:[o!=null&&(0,e.jsxs)(e.Fragment,{children:["\u786E\u8BA4\u540E\u4F60\u5C06\u8FDB\u5165",(0,e.jsx)(Q.Z,{bordered:!1,color:"processing",children:o==null?void 0:o.name})]}),o==null&&(0,e.jsx)(e.Fragment,{children:"\u8BF7\u9009\u62E9\u8981\u8FDB\u5165\u7684\u9879\u76EE"})]})}),(0,e.jsx)(f.Z,{children:(0,e.jsx)(j.ZP,{type:"primary",disabled:o==null,style:{fontSize:14},onClick:me,children:"\u786E\u8BA4"})})]})})]})})]})})})},se=ee},58839:function(O,v,s){s.d(v,{Kv:function(){return S},n$:function(){return p}});var d=s(61273),p=(0,d.Z)("/api/user/login",{method:"post"}),S=(0,d.Z)("/api/oauth/logout_a",{method:"post"}),C=(0,d.Z)("/api/oauth/user_a",{method:"get"})}}]);
