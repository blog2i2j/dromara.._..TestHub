---
title: 🎱 内置函数
order: 4
editLink: false
category:
  - 原理介绍
---

## 算数运算

### add-加

参数

| 参数            | 名称         | 是否必传 | 可选值 |
| --------------- | ------------ | -------- | ------ |
| 参数任意 attr\_ | \_为任意数字 |          | 数字   |

| 写法                                            | 例子            |
| ----------------------------------------------- | --------------- |
| `%{add(attr1:10,attr2:20,attr3:30,attr4:40)}`   | 10\+20\+30\+40  |
| `%{add(attr1:10,attr2:20,attr3:30,attr88:900)}` | 10\+20\+30\+900 |

### sub-减

参数

| 参数  | 名称   | 是否必传 | 可选值 |
| ----- | ------ | -------- | ------ |
| attr1 | 被减数 | 是       | 数字   |
| attr2 | 减数   | 是       | 数字   |

| 写法                        | 例子   |
| --------------------------- | ------ |
| `%{sub(attr1:88,attr2:20)}` | 88\-10 |

### mult-乘

参数

| 参数            | 名称         | 是否必传 | 可选值 |
| --------------- | ------------ | -------- | ------ |
| 参数任意 attr\_ | \_为任意数字 |          | 数字   |

| 写法                                             | 例子            |
| ------------------------------------------------ | --------------- |
| `%{mult(attr1:10,attr2:20,attr3:30,attr4:40)}`   | 10\*20\*30\*40  |
| `%{mult(attr1:10,attr2:20,attr3:30,attr88:900)}` | 10\*20\*30\*900 |

### div-减

参数

| 参数  | 名称   | 是否必传 | 可选值 |
| ----- | ------ | -------- | ------ |
| attr1 | 被除数 | 是       | 数字   |
| attr2 | 除数   | 是       | 数字   |

| 写法                        | 例子  |
| --------------------------- | ----- |
| `%{div(attr1:88,attr2:20)}` | 88/10 |

## 时间相关

<a name="getNowTime"></a>

### getNowTime-获取当前时间

参数

| 参数     | 名称   | 是否必传 | 可选值                                            |
| -------- | ------ | -------- | ------------------------------------------------- |
| `format` | 格式化 | 否       | `yyyy-MM-dd HH:mm:ss`默认,`yyyy-MM-dd`,`HH:mm:ss` |

| 写法                                        | 例子                                   |
| ------------------------------------------- | -------------------------------------- |
| `%{getNowTime(format:yyyy-MM-dd HH:mm:ss)}` | 获取当前时间年月日时分秒字符串         |
| `%{getNowTime(format:yyyy-MM-dd)}`          | 获取当前时间年月秒字符串               |
| `%{getNowTime(format:HH:mm:ss)}`            | 获取当前时间时分秒字符串               |
| `%{getNowTime()}`                           | 获取当前时间年月日时分秒时间类型的数据 |

<a name="timeGap"></a>

### timeGap-两个时间的差

参数

| 参数    | 名称   | 是否必传 | 可选值                                                       |
| ------- | ------ | -------- | ------------------------------------------------------------ |
| `time1` | 时间 1 | 是       | `yyyy-MM-dd HH:mm:ss`,`yyyy-MM-dd`,`HH:mm:ss` 三种格式的数据 |
| `time2` | 时间 2 | 是       | `yyyy-MM-dd HH:mm:ss`,`yyyy-MM-dd`,`HH:mm:ss`三种格式的数据  |
| `unit`  | 单位   | 否       | `DAYS` 天,`HOURS`小时,`MINUTES` 分钟, `SECONDS` 秒默认       |

| 写法                                                                                                 | 例子                                          |
| ---------------------------------------------------------------------------------------------------- | --------------------------------------------- |
| `%{timeGap(time1:%{getNowTime(format:yyyy-MM-dd HH:mm:ss)},time2:2023-02-27 19:00:00,unit:SECONDS)}` | 获取当前时间与 2023-02-27 19:00:00 差距多少秒 |
| `%{timeGap(time1:2023-02-28 19:00:00,time2:2023-02-27 19:00:00,unit:HOURS)}`                         | 获取两个时间的间隔的小时数                    |

## 数据处理

### toJson-字符串转 JSON 对象

参数

| 参数   | 名称       | 是否必传 | 可选值 |
| ------ | ---------- | -------- | ------ |
| `attr` | 数据字符串 | 是       |        |

| 写法                      | 例子                           |
| ------------------------- | ------------------------------ |
| `%{toJson(attr:${data})}` | 将 data 字符串转换成 JSON 对象 |

### toNumber-字符串转成数字

参数

| 参数   | 名称       | 是否必传 | 可选值 |
| ------ | ---------- | -------- | ------ |
| `attr` | 数据字符串 | 是       |        |

| 写法                  | 例子                |
| --------------------- | ------------------- |
| `%{toNumber(attr:1)}` | 把 1 转换成数字类型 |

### size-获取列表长度

参数

| 参数    | 名称 | 是否必传 | 可选值 |
| ------- | ---- | -------- | ------ |
| `attr1` | 列表 | 是       |        |

| 写法                      | 例子                       |
| ------------------------- | -------------------------- |
| `%{size(attr1:${step3})}` | 获取第三步返回值的数组长度 |

### getData-生成数据

参数

| 参数   | 名称 | 是否必传 | 可选值 |
| ------ | ---- | -------- | ------ |
| `size` | 数量 | 否       | 默认 0 |

| 写法                                  | 例子                                                       |
| ------------------------------------- | ---------------------------------------------------------- |
| `%{getData(size:2,name:vinc,age:18)}` | 生成一个列表两个元素，每一个元素的 name 为 vinc，age 为 18 |
| `%{getData(name:vinc,age:18)}`        | 生成一个对象的 name 为 vinc，age 为 18                     |
